{"changed":true,"filter":false,"title":"README.md","tooltip":"/README.md","value":"# Gymstuff.com : Ecommerce Site\n\nThis project is a web-based e-commerce site which allows users to view gym products, supplements and vitamins to aid their fitness goals. The user can search products by name or by category. In addition to this, the user can input their current physical attributes and gain insights such as current body mass index; recommended daily calorie intake for a selected aim; and recommended daily macronutrient intake.\nThe user is required to register and log-in to access the physical attribute features, the user must also log-in to purchase their chosen products and review products they have purchased. All products, users and physical attributes on the site are located in a PostgreSQL database.\n\n## Planning of Gymstuff.com\nThe planning undertaken prior to beginning the project is described in the following document: [Project planning document](https://github.com/chrismurray1980/GymStuff/blob/master/PLANNING.md)\n\n## Wireframe/site configuration development\n\nThe basic layout of the web page consists of all the page content surrounded by the background image. The header, content and footer are all contained within this main container. The header consists of the site brand; navigation links; and a search bar. The header is uniform across all the site's pages. Below the header is where the current page content is shown. Following the current page content is the footer which contains information of the site designer and the date.\n\n### Landing page\n\nThe home page of the site shows the top products from each of the product categories. Each category is separated by the category label and shows the three most expensive products for each category. These products are followed by a button to show all products of this specific category. At the bottom of the home page is a Home button to take the user back to the top of the page. The wireframe designed for the home page is shown below.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/gumstuff_home_wireframe.JPG)\n\nFortunately, the layout used gives a clean, clear user experience and needed little modification from the initial wireframe design. The layout of the final homepage are shown in the images below. The products are shown as cards containing product title, image, information and price.\n\nThe header of the site, shown below, remains uniform and as stated previously contains the brand, links and search bar.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/home1.JPG)\n\nThe weight category product cards are shown in the image below.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/home2.JPG)\n\nFinally, the category section is completed with a link to all products in that category. This is followed by the section showing the three most expensive products in the rack and bench category. This layout is repeated for all five product categories in the database.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/home3.JPG)\n\n### Product category\n\nWhen selecting a product category from the navigation bar or by clicking the 'view similar products' link on the landing page, the user will be shown the product category page. This page contains all products of a particular category ordered from least to most expensive. Again, the products are shown as cards to give a clear layout and instantly convey the product information to the user. The wireframe for the all products page is shown below and is the same for all product categories. After all the products have been listed the user is given the option of returning home via the home button.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/all_products.JPG)\n\nThe final layout of this page is shown below with the last three products and the home button shown.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/all_products_complete.JPG)\n\n### Product page\n\nWithin the product cards on the landing page and the category pages, the user is given the opportunity to view the specific product in more detail by clicking the 'view more' link. This will take the user to the product page for that specific product. \n\nThe product page conatins the name of the product, a larger product image and a more in-depth product description. In addition to this, the page contains the add to cart form and button and the 'product reviews' button. The product reviews button lists the reviews of the product given by registered users. At the bottom of the page is the 'add review' button which allows logged in users to add a review for that product: this button and form is hidden for unauthorised users.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/product_page.JPG)\n\nThe final layout of the page is shown below. When the 'add review' button is clicked the add review form is revealed.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/product_page-actual.JPG)\n\n### Calculator pages\n\nThe site also contains the BMI and Macro calculator features. The user inputs their physical attributes into the BMI or Macro calculator forms and their results are calculated and displayed to the user. The forms use simple bootstrao layout and the wireframe for the BMI form is shown below.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/bmi_calc.JPG)\n\nAgain, implementation of this varied very little from the initial wireframe design, the final version is shown below.\n\n![Image not available](https://chris-m-ecommerce.s3.amazonaws.com/media/images/bmi_calc_actual.JPG)\n\n## Database schema\n\nAs stated in the project planning document, the database for the application consisted of database schemes based on several different app models, related via foreign keys within the database. As the project developed the database model for each app did also. The model definitions for the products themselves and the unique models added to this project are shown below.\n\n### Product model\n\nThe product model, shown below, contains all information related to the product, including a field to upload the product image. The category field is populated by means of choices supplied in the product model.\n\n    name = models.CharField(max_length=254, default='')\n    category = models.CharField(max_length=30, choices=CATEGORY, default='Weights')\n    short_description = models.CharField(max_length=254, default='')\n    description = models.TextField()\n    price = models.DecimalField(max_digits=6, decimal_places=2)\n    image = models.ImageField(upload_to='images')\n\n### Physical model\n\nThe Physical model, for calculating user BMI, contained within the physical app has the following model definition:\n\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    height = models.FloatField(validators=[MinValueValidator(0), MaxValueValidator(300)],)\n    weight = models.FloatField(validators=[MinValueValidator(0), MaxValueValidator(500)],)\n    unit_height = models.FloatField(default=0)\n    unit_weight = models.FloatField(default=0)\n    bmi_calc = models.FloatField(default=0)\n    bmi_category = models.CharField(default='', max_length=200)\n    date_now = models.DateTimeField(auto_now_add=True)\n    unit_type = models.CharField(choices=unit_type, default='Metric', max_length=200)\n\nIn this case the user is the foreign key used to link tables within the database. The site user is able to select the 'unit\\_type' field based on choices defined within the model itself. The model fields from 'unit\\_height' onwards, excluding 'unit\\_type', are obtained via methods within the BMI model class.\n\n### Macro model\n\nThe Macro model contained within the physical app has the following model definition:\n    \n    user = models.ForeignKey(settings.AUTH\\_USER\\_MODEL, on_delete=models.CASCADE)\n    height = models.FloatField(validators=[MinValueValidator(0), MaxValueValidator(300)],)\n    weight = models.FloatField(validators=[MinValueValidator(0), MaxValueValidator(500)],)\n    age = models.IntegerField(validators=[MinValueValidator(0), MaxValueValidator(120)],)\n    unit_height = models.FloatField(default=0)\n    unit_weight = models.FloatField(default=0)\n    activity\\_level = models.CharField(choices=activity\\_level, default='', max_length=200)\n    bmr = models.FloatField(default=0)\n    TDEE = models.FloatField(default=0)\n    date = models.DateTimeField(auto\\_now_add=True)\n    aim = models.CharField(choices=aim, default='', max_length=200)\n    daily\\_calorie_goal = models.FloatField(default=0)\n    carb_weight = models.FloatField(default=0)\n    protein_weight = models.FloatField(default=0)\n    fat_weight = models.FloatField(default=0)\n    carb_percent = models.FloatField(default=0)\n    protein_percent = models.FloatField(default=0)\n    fat_percent = models.FloatField(default=0)\n    unit\\_type = models.CharField(choices=unit\\_type, default='Metric', max_length=200)\n\nAgain, the user is the foreign key used to link tables within the database. The site user is able to select the 'unit\\_type' field based on choices defined within the model itself. This also goes for the 'aim' and 'activity\\_level' fields. Again, the majority of the fields are populated by means of methods contained within the model class.\n\n### Customer Review model\n\nThe customer review model is contained within the customer-review app. In this case the product itself is used as the foreign key to link the review to a specific product. In this case the user is given choices for the rating which are defined within the model itself.\n\n    product = models.ForeignKey(Product, on_delete=models.CASCADE)\n    username = models.CharField(max_length=200)\n    headline = models.CharField(max_length=200)\n    comment = models.TextField()\n    rating = models.IntegerField(choices=RATING_CHOICES)\n    date = models.DateTimeField(auto_now_add=True)\n    \n## Site configuration\n\nThe Gymstuff.com project consists of several applications working together to generate the final website. The applications within this project are:  \n\n    - Accounts  \n    - Cart  \n    - Checkout  \n    - Customer reviews  \n    - Physical  \n    - Products  \n    - Search  \n\n### Settings\n\nThe settings script within the Gymstuff project directory allows for the setup of the databases used, the configuration of the media storage; email setup; and static file storage. Each of the project apps must be registered here to allow them to function within the website.\n\n#### Database \n\nThe database used within the project was the PostgreSQL database available through Heroku. A superuser was created for this database which allowed full access to the database. This access was available through django admin.\n\n#### Storage\n\nAn Amazon S3 bucket was configured and linked to the project to store the static files ( CSS and JS). This is necessary as Heroku will delete static files so an external storage are is required. The S3 bucket was also used to store media files such as images that are used within the site.\n\n#### Environment variables\n\nThe secret keys, email passwords, stripe variables and environment variables for S3 were stored within an env.py file during development, this file was never uploaded to the project git repository. During deployment the enviroment variables are stored in heroku.\n\n#### URLs\n\nThe URLs script within the Gymstuff project directory itself allows each of the app urls to be accessed via a single location. This allows the content for each app to be accessed throughout the entirety of the website.\n\n### Apps\n\nRather than reinventing the wheel; several of the core apps were imported from Code Institute's Ecommerce project. In this case, the link will be given to the app code rather providing a description of the code and functionality itself. In the case that the code was either personally generated or heavily modified: a more detailed description will be given.\n\n#### Accounts\n\nThe accounts app used in this project was taken directly from Code Institute's Ecommerce project with minimal modification, the link to this application can be found [here](https://github.com/Code-Institute-Solutions/e-commerce/tree/master/2-Completed_Project/accounts). This app allows users to register, login, logout and provides 'forgot my password' reset functionality.\n\n#### Cart  \n\nThe cart app used in this project was taken directly from Code Institute's Ecommerce project with minimal modification, the link to this application can be found [here](https://github.com/Code-Institute-Solutions/e-commerce/tree/master/2-Completed_Project/cart). This app allows users to add products to their cart via a form and amen or remove these products from their cart. The only modification made to this app is detailed below.\n\n##### add\\_to\\_cart function\n\nMinor modifications were made to this function primarily, to return the user back to the product page they were viewing rather than the landing page of the site. This was modified to provide a better user experience and achieved using the following code:\n\n    return HttpResponseRedirect(reverse('product', args=(product.id,)))\n    \nFurther minor modifications were made in returning more messages to the user to further improve their experience.\n\n#### Checkout  \n\nThe checkout app used in this project was taken directly from Code Institute's Ecommerce project with minimal modification, the link to this application can be found [here](https://github.com/Code-Institute-Solutions/e-commerce/tree/master/2-Completed_Project/checkout). This app allows customers to pay for their chosen products using the Stripe API.\n\n#### Customer reviews  \n\nThis is a relatively simple app and contains only the functionality used to display the customer reviews based on the specific product. The single view of the app is detailed below.\n\n##### Customer review \n\nThe function gets the product ID and queries the databse for all reviews associated with that product. The query will return the nine latest reviews of the product from newest to oldest. The user is then directed to the customer review html which lists all the reviews found for that product as shown below.\n\n    def customer_reviews(request, id):\n        # Get product from id\n        product=get_object_or_404(Product, id=id)\n        # List latest reviews by date\n        latest_review_list = customer_review.objects.filter(product__id=id).order_by('-date')[:9]\n        # Create view context\n        context = {'latest_review_list':latest_review_list, 'product':product}\n        # Render review page\n        return render(request, 'customer_reviews.html', context)\n\n#### Physical  \n\nThis app is used to take the user's physical inputs and calculate either the user bmi or provide information on recommended daily calorie intake and macronutrient ratios. This app contains two models: Physical (for BMI calculations) and Macro (for macronutrient calculations). The views for the Physical and Macro models are described below.\n\n##### BMI form\n\nFor the BMI form, the user enters their height and weight in either Imperial or Metric units. The functions contained within the model do any conversion required and calculate the user's BMI. The function then queries the database for the latest post by the user and directs the user to the bmi results html to display the results. If the form data is invalid the user is returned to the form.\n\n    @login_required\n    def bmi_form(request):\n        # Create instance of form\n        form = bmi(request.POST)\n        # Validate form \n        if form.is_valid():\n            # Get data from form\n            height = form.cleaned_data['height']\n            weight = form.cleaned_data['weight']\n            unit_type = form.cleaned_data['unit_type']\n            # Create instance of model \n            physical = Physical()\n            # Assign values to model instance\n            physical.height= height\n            physical.weight= weight\n            physical.unit_type = unit_type\n            physical.date_now = datetime.datetime.now()\n            form_save= form.save(commit=False)\n            form_save.user= request.user\n            # Save created instance\n            form_save.save()\n            # Search database for model instance\n            details = Physical.objects.filter(user=request.user).order_by('-date_now')[:1]\n            # Render result with model instance\n            return render(request, 'bmi_result.html', {'details':details})\n            # Render bmi form\n        return render(request, 'bmi_form.html', {'form': form})\n\n##### Macro form\n\nFor the Macro form, the user enters their height and weight in either Imperial or Metric units. The functions contained within the model do any conversion required and calculate the user's recommended daily calorie intake and macronutrient ratios based on user golas. The function then queries the database for the latest post by the user and directs the user to the macro results html to display the results. If the form data is invalid the user is returned to the form.\n\n    @login_required\n    def macro_form(request):\n        # Create form instance\n        form = macro(request.POST)\n        # Validate form\n        if form.is_valid():\n            # Get form data\n            height = form.cleaned_data['height']\n            weight = form.cleaned_data['weight']\n            age = form.cleaned_data['age']\n            activity_level = form.cleaned_data['activity_level']\n            aim = form.cleaned_data['aim']\n            # Create model instance\n            macro_calc = Macro()\n            # Assign data to model instance\n            macro_calc.height= height\n            macro_calc.weight= weight\n            macro_calc.age = age\n            macro_calc.activity_level = activity_level\n            macro_calc.aim = aim\n            form_save= form.save(commit=False)\n            form_save.user= request.user\n            # Save model instance\n            form_save.save()\n            # Search database for model instance \n            details = Macro.objects.filter(user=request.user).order_by('-date')[:1]\n            # Extract weight and percentage data from macro database search\n            for item in details:\n                carb_weight = item.carb_weight\n                protein_weight = item.protein_weight\n                fat_weight = item.fat_weight\n                carb_percent = 100*item.carb_percent\n                protein_percent = 100*item.protein_percent\n                fat_percent = 100*item.fat_percent\n            # Create macro array\n            macros = [carb_weight, protein_weight, fat_weight, carb_percent, protein_percent, fat_percent]\n            # Convert array to JSON\n            macros_json = json.dumps(macros)\n            # Render macro results page passing details and macro_json as arguments\n            return render(request, 'macro_result.html', {'details': details, 'macros': macros_json})\n        # Render macro form\n        return render(request, 'macro_form.html', {'form': form})\n\n#### Products \n\nThe products app used in this project was taken directly from Code Institute's Ecommerce project, the link to this application can be found [here](https://github.com/Code-Institute-Solutions/e-commerce/tree/master/2-Completed_Project/products). This app is used to define products within the database. The app model itself was modified to include a 'Category' field in addition to modification to existing views or creation of entirely new functions. These will be described in the following.\n\n##### all\\_products\n\nThe all products function is used in Code Insitute's Ecommerce site for the landing page to show all the products. This was modified to find all products of a particular category ordered by price and limited to three products. Passing this to the landing page template allowed products to be displayed by category and was achieved using the 'weights' category example below.\n\n    def all_products(request):\n        # Get products based on category\n        weights = Product.objects.filter(category='Weights').order_by('-price')[:3] \n        # Render all products view\n        return render(request, \"all_products.html\", {\"weights\": weights})\n\n##### product\n\nThis function allows the user to view the product page for a specific product. The function finds the product by means of its ID, it then generates the review form for the product and then renders the product page as shown in the code below.\n\n    def product(request, id):\n        # Get product via id\n        product = Product.objects.get(pk=id)\n        form = ReviewForm()\n        # Get product page\n        return render(request, 'product.html', {'product': product, 'form':form })\n\n##### Create product review \n\nThe create product review view posts the data from the review form, validates the form and then returns the user to the specific product page if the review was posted successfully. The '@login' decorator ensures that only authorised users can post reviews, the code for this function is shown below.\n\n    @login_required\n    def create_or_edit_review(request, product_id):\n        # Get product by id\n        product = Product.objects.get(id=product_id)\n        # Create form instance \n        form = ReviewForm(request.POST)\n        # Validate form\n        if form.is_valid():\n            # Get data from form\n            rating = form.cleaned_data['rating']\n            comment = form.cleaned_data['comment']\n            username = form.cleaned_data['username']\n            headline = form.cleaned_data['headline']\n            # Create model instance\n            review = customer_review()\n            # Add data to model instance\n            review.product = Product.objects.get(id=product_id)\n            review.username = username\n            review.rating = rating\n            review.comment = comment\n            review.headline = headline\n            review.date = datetime.datetime.now()\n            review.save()\n            # Inform user that review successfully submitted\n            messages.success(request, \"You have successfully reviewed this product\")\n            # Return to product view\n            return HttpResponseRedirect(reverse('product', args=(product.id,)))\n        # Render product view\n        return render(request, 'product.html', {'product': product, 'form': form})\n\n##### Similar products view\n\nThis view is used to allow users to view all products of a particular category. The function finds the product in the database by means of its ID then filters all products of that category in terms of price. The site then directs the user to the product category html page as shown in the code below.\n\n    def view_similar_products(request, product_id):\n        # Get product by id\n        product = Product.objects.get(id=product_id)\n        # Find product category\n        product_category = product.category\n        # Search db for products of category and order by price\n        category = Product.objects.filter(category=product_category).order_by('price')\n        # Display product category page\n        return render(request, \"product_category.html\", {\"products\": category})\n\n#### Search\n\nThe search app used in this project was taken directly from Code Institute's Ecommerce project, the link to this application can be found [here](https://github.com/Code-Institute-Solutions/e-commerce/tree/master/2-Completed_Project/search). This app is used to search for products or categories using the search bar and additionally, to search for products using navigation bar links. Modifications were made to the views of this app, as described in the following.\n\n##### do_search\n\nThis function originally only searched for the name of the product, to improve user experience 'OR' functionality was added to include the category field of the product as shown in the code below.\n\n    def do_search(request):\n        products = Product.objects.filter(Q(name__icontains=request.GET['q']) |  Q(category__icontains=request.GET['q'])).order_by('price')\n        return render(request, \"product_category.html\", {\"products\": products})\n\n##### category search\n\nA category search feature was added to allow navigation links to query the database for products of a particular category. An example showing the function to search the 'weight' category is shown below.\n\n    def weight_search(request):\n        weights = Product.objects.filter(category='Weights').order_by('price')\n        return render(request, \"product_category.html\", {\"products\": weights})\n\n## Site features\n\nFor clarity, site features will be outlined in terms of how they are implemented in each of the HTML templates.\n\n## Features Left to Implement\n\nDue to time constraints the following features, which would produce a more enjoyable user experience and more professional website, were not implemented:\n\n## Technologies Used\n\nThe following technologies were used in the development of the application:\n\nFlask: A microframework for Python\nMongoDB Atlas: Automated cloud mongoDB service\nJQuery: A javascript library used for event handling and DOM manipulation\nBootstrap 4: A toolkit for developing HTML, CSS, and JS\nSASS: A professional level CSS extension language\nJinja: Templating language for Python\nHeroku: A cloud platform as a service\ndc.js: Dimensional charting javascript library\nd3.js: Javascript library for manipulating documents based on data\nMing: An object document mapper for mongoDB which extends Pymongo\nAWS S3: Amazon simple storage device\nflask_login: Provides user session management for Flask applications\nflask_sslify: Converts all incoming requests from application to https\nFlask-testing: Provides unittesting utilities for Flask\nGitHub: used to store and save versions of the application\nCloud9: online IDE used to develop the application\n\n## Testing\n\nBoth automated and manual testing was undertaken on the application and this is described in detail in the following document: Testing document\n\n### Travis CI Testing\n\n[![Build Status](https://travis-ci.org/chrismurray1980/GymStuff.svg?branch=master)](https://travis-ci.org/chrismurray1980/GymStuff)\n\n## Code validation\n\nThe HTML, CSS and JS code was run through code validation to detect any errors.\n\n### HTML validation\n\nThe W3C Markup validation service was used to check the quality of the HTML language used. This was run for all the document templates and the base template as follows:\n\nW3C_base.html\nW3C_add_recipe.html\nW3C_edit_recipe.html\nW3C_favourites.html\nW3C_index.html\nW3C_login.html\nW3C_my_recipes.html\nW3C_register.html\nW3C_search_results.html\nW3C_show_recipe.html\n\nThe the main issues found were due to the use of Jinja.\n\n### CSS validation\n\nThe W3C CSS validation service was used to check the quality of the CSS used. The results are show here: W3C_CSS\n\n### JS validation\n\nThe written in the main.js and plot.js files was run through JSHint with no major errors as follows:\n\n    JSHint_main.js\n    JSHint_plot.js\n\n## Deployment\n\nTo deploy the application to Heroku firstly, a new project was created in Heroku. A Procfile was created which was used to tell Heroku how to run the application. In addition to this a requirements.txt file was created which told Heroku which Python modules were needed to run the application. In addition to this, environment variables had to be configured in Heroku. This was achieved by going to the project settings in Heroku and implementing the IP and PORT to be used by the application in the config variables settings. In addition to this the name of the mongoDB collection and the URI of the database were added to these settings. In addition to this, for security within Flask, a secret key for the application was also added to these variables. The variables used by S3 such as the access key, secret key and bucket name were configured for use with Heroku by running:\n\n$heroku config:set S3_KEY=****** S3_SECRET=******* S3_BUCKET=*********\n\nin the console of the Cloud9 application. The project was deployed to Heroku by going to the deploy tab and manually deploying the master branch of the project's GitHub repository. Once the project was successfully deployed, the project was opened by clicking the 'view app' button in Heroku: this was achieved with minimal number of issues.\n\nThere is no difference between the deployed and development versions of the application other than in development version debug is set to 'True' whereas in deployment debug is set to 'False'. The site can be accessed here The Good Grub Guide\n\n### Credits\n\nThe following websites were used for guidance and code snippets used within this application:\n\n\n### Media\n\nThe background image used on the website was obtained from Pexels.\n\ndjango reviews  https://django-rated-reviews.readthedocs.io/en/latest/quickstart.html\n\n\n","undoManager":{"mark":-1137,"position":100,"stack":[[{"start":{"row":212,"column":168},"end":{"row":212,"column":169},"action":"insert","lines":["l"],"id":3804},{"start":{"row":212,"column":169},"end":{"row":212,"column":170},"action":"insert","lines":["c"]},{"start":{"row":212,"column":170},"end":{"row":212,"column":171},"action":"insert","lines":["u"]},{"start":{"row":212,"column":171},"end":{"row":212,"column":172},"action":"insert","lines":["l"]},{"start":{"row":212,"column":172},"end":{"row":212,"column":173},"action":"insert","lines":["a"]},{"start":{"row":212,"column":173},"end":{"row":212,"column":174},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":174},"end":{"row":212,"column":175},"action":"insert","lines":[" "],"id":3805}],[{"start":{"row":212,"column":174},"end":{"row":212,"column":175},"action":"remove","lines":[" "],"id":3806},{"start":{"row":212,"column":173},"end":{"row":212,"column":174},"action":"remove","lines":["e"]}],[{"start":{"row":212,"column":173},"end":{"row":212,"column":174},"action":"insert","lines":["t"],"id":3807},{"start":{"row":212,"column":174},"end":{"row":212,"column":175},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":175},"end":{"row":212,"column":176},"action":"insert","lines":[" "],"id":3808},{"start":{"row":212,"column":176},"end":{"row":212,"column":177},"action":"insert","lines":["t"]},{"start":{"row":212,"column":177},"end":{"row":212,"column":178},"action":"insert","lines":["h"]},{"start":{"row":212,"column":178},"end":{"row":212,"column":179},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":179},"end":{"row":212,"column":180},"action":"insert","lines":[" "],"id":3809},{"start":{"row":212,"column":180},"end":{"row":212,"column":181},"action":"insert","lines":["u"]},{"start":{"row":212,"column":181},"end":{"row":212,"column":182},"action":"insert","lines":["s"]},{"start":{"row":212,"column":182},"end":{"row":212,"column":183},"action":"insert","lines":["e"]},{"start":{"row":212,"column":183},"end":{"row":212,"column":184},"action":"insert","lines":["r"]}],[{"start":{"row":212,"column":184},"end":{"row":212,"column":185},"action":"insert","lines":[" "],"id":3810}],[{"start":{"row":212,"column":184},"end":{"row":212,"column":185},"action":"remove","lines":[" "],"id":3811}],[{"start":{"row":212,"column":184},"end":{"row":212,"column":185},"action":"insert","lines":["'"],"id":3812},{"start":{"row":212,"column":185},"end":{"row":212,"column":186},"action":"insert","lines":["s"]}],[{"start":{"row":212,"column":186},"end":{"row":212,"column":187},"action":"insert","lines":[" "],"id":3813},{"start":{"row":212,"column":187},"end":{"row":212,"column":188},"action":"insert","lines":["B"]},{"start":{"row":212,"column":188},"end":{"row":212,"column":189},"action":"insert","lines":["M"]},{"start":{"row":212,"column":189},"end":{"row":212,"column":190},"action":"insert","lines":["I"]}],[{"start":{"row":212,"column":190},"end":{"row":212,"column":191},"action":"insert","lines":[" "],"id":3814}],[{"start":{"row":212,"column":190},"end":{"row":212,"column":191},"action":"remove","lines":[" "],"id":3815}],[{"start":{"row":212,"column":190},"end":{"row":212,"column":191},"action":"insert","lines":["."],"id":3816}],[{"start":{"row":212,"column":191},"end":{"row":212,"column":192},"action":"insert","lines":[" "],"id":3817},{"start":{"row":212,"column":192},"end":{"row":212,"column":193},"action":"insert","lines":["T"]},{"start":{"row":212,"column":193},"end":{"row":212,"column":194},"action":"insert","lines":["h"]},{"start":{"row":212,"column":194},"end":{"row":212,"column":195},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":195},"end":{"row":212,"column":196},"action":"insert","lines":[" "],"id":3818},{"start":{"row":212,"column":196},"end":{"row":212,"column":197},"action":"insert","lines":["f"]},{"start":{"row":212,"column":197},"end":{"row":212,"column":198},"action":"insert","lines":["u"]},{"start":{"row":212,"column":198},"end":{"row":212,"column":199},"action":"insert","lines":["n"]},{"start":{"row":212,"column":199},"end":{"row":212,"column":200},"action":"insert","lines":["c"]},{"start":{"row":212,"column":200},"end":{"row":212,"column":201},"action":"insert","lines":["t"]},{"start":{"row":212,"column":201},"end":{"row":212,"column":202},"action":"insert","lines":["i"]},{"start":{"row":212,"column":202},"end":{"row":212,"column":203},"action":"insert","lines":["o"]},{"start":{"row":212,"column":203},"end":{"row":212,"column":204},"action":"insert","lines":["n"]}],[{"start":{"row":212,"column":204},"end":{"row":212,"column":205},"action":"insert","lines":[" "],"id":3819},{"start":{"row":212,"column":205},"end":{"row":212,"column":206},"action":"insert","lines":["t"]},{"start":{"row":212,"column":206},"end":{"row":212,"column":207},"action":"insert","lines":["h"]},{"start":{"row":212,"column":207},"end":{"row":212,"column":208},"action":"insert","lines":["e"]},{"start":{"row":212,"column":208},"end":{"row":212,"column":209},"action":"insert","lines":["n"]}],[{"start":{"row":212,"column":209},"end":{"row":212,"column":210},"action":"insert","lines":[" "],"id":3820},{"start":{"row":212,"column":210},"end":{"row":212,"column":211},"action":"insert","lines":["q"]},{"start":{"row":212,"column":211},"end":{"row":212,"column":212},"action":"insert","lines":["u"]},{"start":{"row":212,"column":212},"end":{"row":212,"column":213},"action":"insert","lines":["e"]},{"start":{"row":212,"column":213},"end":{"row":212,"column":214},"action":"insert","lines":["r"]},{"start":{"row":212,"column":214},"end":{"row":212,"column":215},"action":"insert","lines":["i"]}],[{"start":{"row":212,"column":215},"end":{"row":212,"column":216},"action":"insert","lines":["e"],"id":3821},{"start":{"row":212,"column":216},"end":{"row":212,"column":217},"action":"insert","lines":["s"]}],[{"start":{"row":212,"column":217},"end":{"row":212,"column":218},"action":"insert","lines":[" "],"id":3822},{"start":{"row":212,"column":218},"end":{"row":212,"column":219},"action":"insert","lines":["t"]},{"start":{"row":212,"column":219},"end":{"row":212,"column":220},"action":"insert","lines":["h"]},{"start":{"row":212,"column":220},"end":{"row":212,"column":221},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":221},"end":{"row":212,"column":222},"action":"insert","lines":[" "],"id":3823},{"start":{"row":212,"column":222},"end":{"row":212,"column":223},"action":"insert","lines":["d"]},{"start":{"row":212,"column":223},"end":{"row":212,"column":224},"action":"insert","lines":["a"]},{"start":{"row":212,"column":224},"end":{"row":212,"column":225},"action":"insert","lines":["t"]},{"start":{"row":212,"column":225},"end":{"row":212,"column":226},"action":"insert","lines":["a"]},{"start":{"row":212,"column":226},"end":{"row":212,"column":227},"action":"insert","lines":["b"]},{"start":{"row":212,"column":227},"end":{"row":212,"column":228},"action":"insert","lines":["a"]},{"start":{"row":212,"column":228},"end":{"row":212,"column":229},"action":"insert","lines":["s"]},{"start":{"row":212,"column":229},"end":{"row":212,"column":230},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":230},"end":{"row":212,"column":231},"action":"insert","lines":[" "],"id":3824},{"start":{"row":212,"column":231},"end":{"row":212,"column":232},"action":"insert","lines":["f"]},{"start":{"row":212,"column":232},"end":{"row":212,"column":233},"action":"insert","lines":["o"]},{"start":{"row":212,"column":233},"end":{"row":212,"column":234},"action":"insert","lines":["r"]}],[{"start":{"row":212,"column":234},"end":{"row":212,"column":235},"action":"insert","lines":[" "],"id":3825},{"start":{"row":212,"column":235},"end":{"row":212,"column":236},"action":"insert","lines":["t"]},{"start":{"row":212,"column":236},"end":{"row":212,"column":237},"action":"insert","lines":["h"]},{"start":{"row":212,"column":237},"end":{"row":212,"column":238},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":238},"end":{"row":212,"column":239},"action":"insert","lines":[" "],"id":3826},{"start":{"row":212,"column":239},"end":{"row":212,"column":240},"action":"insert","lines":["l"]},{"start":{"row":212,"column":240},"end":{"row":212,"column":241},"action":"insert","lines":["a"]},{"start":{"row":212,"column":241},"end":{"row":212,"column":242},"action":"insert","lines":["t"]},{"start":{"row":212,"column":242},"end":{"row":212,"column":243},"action":"insert","lines":["e"]},{"start":{"row":212,"column":243},"end":{"row":212,"column":244},"action":"insert","lines":["s"]},{"start":{"row":212,"column":244},"end":{"row":212,"column":245},"action":"insert","lines":["t"]}],[{"start":{"row":212,"column":245},"end":{"row":212,"column":246},"action":"insert","lines":[" "],"id":3827}],[{"start":{"row":212,"column":246},"end":{"row":212,"column":247},"action":"insert","lines":["p"],"id":3828},{"start":{"row":212,"column":247},"end":{"row":212,"column":248},"action":"insert","lines":["o"]},{"start":{"row":212,"column":248},"end":{"row":212,"column":249},"action":"insert","lines":["s"]},{"start":{"row":212,"column":249},"end":{"row":212,"column":250},"action":"insert","lines":["t"]}],[{"start":{"row":212,"column":250},"end":{"row":212,"column":251},"action":"insert","lines":[" "],"id":3829},{"start":{"row":212,"column":251},"end":{"row":212,"column":252},"action":"insert","lines":["b"]},{"start":{"row":212,"column":252},"end":{"row":212,"column":253},"action":"insert","lines":["y"]}],[{"start":{"row":212,"column":253},"end":{"row":212,"column":254},"action":"insert","lines":[" "],"id":3830},{"start":{"row":212,"column":254},"end":{"row":212,"column":255},"action":"insert","lines":["t"]},{"start":{"row":212,"column":255},"end":{"row":212,"column":256},"action":"insert","lines":["h"]},{"start":{"row":212,"column":256},"end":{"row":212,"column":257},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":257},"end":{"row":212,"column":258},"action":"insert","lines":[" "],"id":3831},{"start":{"row":212,"column":258},"end":{"row":212,"column":259},"action":"insert","lines":["u"]},{"start":{"row":212,"column":259},"end":{"row":212,"column":260},"action":"insert","lines":["s"]},{"start":{"row":212,"column":260},"end":{"row":212,"column":261},"action":"insert","lines":["e"]},{"start":{"row":212,"column":261},"end":{"row":212,"column":262},"action":"insert","lines":["r"]}],[{"start":{"row":212,"column":262},"end":{"row":212,"column":263},"action":"insert","lines":[" "],"id":3832}],[{"start":{"row":212,"column":263},"end":{"row":212,"column":264},"action":"insert","lines":["a"],"id":3833},{"start":{"row":212,"column":264},"end":{"row":212,"column":265},"action":"insert","lines":["n"]},{"start":{"row":212,"column":265},"end":{"row":212,"column":266},"action":"insert","lines":["d"]}],[{"start":{"row":212,"column":266},"end":{"row":212,"column":267},"action":"insert","lines":[" "],"id":3834},{"start":{"row":212,"column":267},"end":{"row":212,"column":268},"action":"insert","lines":["r"]},{"start":{"row":212,"column":268},"end":{"row":212,"column":269},"action":"insert","lines":["e"]},{"start":{"row":212,"column":269},"end":{"row":212,"column":270},"action":"insert","lines":["n"]}],[{"start":{"row":212,"column":269},"end":{"row":212,"column":270},"action":"remove","lines":["n"],"id":3835},{"start":{"row":212,"column":268},"end":{"row":212,"column":269},"action":"remove","lines":["e"]},{"start":{"row":212,"column":267},"end":{"row":212,"column":268},"action":"remove","lines":["r"]}],[{"start":{"row":212,"column":267},"end":{"row":212,"column":268},"action":"insert","lines":["d"],"id":3836},{"start":{"row":212,"column":268},"end":{"row":212,"column":269},"action":"insert","lines":["i"]},{"start":{"row":212,"column":269},"end":{"row":212,"column":270},"action":"insert","lines":["r"]},{"start":{"row":212,"column":270},"end":{"row":212,"column":271},"action":"insert","lines":["e"]},{"start":{"row":212,"column":271},"end":{"row":212,"column":272},"action":"insert","lines":["c"]},{"start":{"row":212,"column":272},"end":{"row":212,"column":273},"action":"insert","lines":["t"]},{"start":{"row":212,"column":273},"end":{"row":212,"column":274},"action":"insert","lines":["s"]}],[{"start":{"row":212,"column":274},"end":{"row":212,"column":275},"action":"insert","lines":[" "],"id":3837},{"start":{"row":212,"column":275},"end":{"row":212,"column":276},"action":"insert","lines":["t"]},{"start":{"row":212,"column":276},"end":{"row":212,"column":277},"action":"insert","lines":["h"]},{"start":{"row":212,"column":277},"end":{"row":212,"column":278},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":278},"end":{"row":212,"column":279},"action":"insert","lines":[" "],"id":3838},{"start":{"row":212,"column":279},"end":{"row":212,"column":280},"action":"insert","lines":["u"]},{"start":{"row":212,"column":280},"end":{"row":212,"column":281},"action":"insert","lines":["s"]},{"start":{"row":212,"column":281},"end":{"row":212,"column":282},"action":"insert","lines":["e"]},{"start":{"row":212,"column":282},"end":{"row":212,"column":283},"action":"insert","lines":["r"]}],[{"start":{"row":212,"column":283},"end":{"row":212,"column":284},"action":"insert","lines":[" "],"id":3839},{"start":{"row":212,"column":284},"end":{"row":212,"column":285},"action":"insert","lines":["t"]},{"start":{"row":212,"column":285},"end":{"row":212,"column":286},"action":"insert","lines":["o"]}],[{"start":{"row":212,"column":286},"end":{"row":212,"column":287},"action":"insert","lines":[" "],"id":3840},{"start":{"row":212,"column":287},"end":{"row":212,"column":288},"action":"insert","lines":["t"]},{"start":{"row":212,"column":288},"end":{"row":212,"column":289},"action":"insert","lines":["h"]},{"start":{"row":212,"column":289},"end":{"row":212,"column":290},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":290},"end":{"row":212,"column":291},"action":"insert","lines":[" "],"id":3841},{"start":{"row":212,"column":291},"end":{"row":212,"column":292},"action":"insert","lines":["B"]}],[{"start":{"row":212,"column":291},"end":{"row":212,"column":292},"action":"remove","lines":["B"],"id":3842}],[{"start":{"row":212,"column":291},"end":{"row":212,"column":292},"action":"insert","lines":["'"],"id":3843}],[{"start":{"row":212,"column":291},"end":{"row":212,"column":292},"action":"remove","lines":["'"],"id":3844}],[{"start":{"row":212,"column":291},"end":{"row":212,"column":292},"action":"insert","lines":["b"],"id":3845},{"start":{"row":212,"column":292},"end":{"row":212,"column":293},"action":"insert","lines":["m"]},{"start":{"row":212,"column":293},"end":{"row":212,"column":294},"action":"insert","lines":["i"]}],[{"start":{"row":212,"column":294},"end":{"row":212,"column":295},"action":"insert","lines":[" "],"id":3846},{"start":{"row":212,"column":295},"end":{"row":212,"column":296},"action":"insert","lines":["r"]},{"start":{"row":212,"column":296},"end":{"row":212,"column":297},"action":"insert","lines":["e"]},{"start":{"row":212,"column":297},"end":{"row":212,"column":298},"action":"insert","lines":["s"]},{"start":{"row":212,"column":298},"end":{"row":212,"column":299},"action":"insert","lines":["u"]},{"start":{"row":212,"column":299},"end":{"row":212,"column":300},"action":"insert","lines":["l"]},{"start":{"row":212,"column":300},"end":{"row":212,"column":301},"action":"insert","lines":["t"]},{"start":{"row":212,"column":301},"end":{"row":212,"column":302},"action":"insert","lines":["s"]}],[{"start":{"row":212,"column":302},"end":{"row":212,"column":303},"action":"insert","lines":[" "],"id":3847},{"start":{"row":212,"column":303},"end":{"row":212,"column":304},"action":"insert","lines":["h"]},{"start":{"row":212,"column":304},"end":{"row":212,"column":305},"action":"insert","lines":["t"]},{"start":{"row":212,"column":305},"end":{"row":212,"column":306},"action":"insert","lines":["m"]},{"start":{"row":212,"column":306},"end":{"row":212,"column":307},"action":"insert","lines":["l"]}],[{"start":{"row":212,"column":307},"end":{"row":212,"column":308},"action":"insert","lines":[" "],"id":3848},{"start":{"row":212,"column":308},"end":{"row":212,"column":309},"action":"insert","lines":["t"]},{"start":{"row":212,"column":309},"end":{"row":212,"column":310},"action":"insert","lines":["o"]}],[{"start":{"row":212,"column":310},"end":{"row":212,"column":311},"action":"insert","lines":[" "],"id":3849},{"start":{"row":212,"column":311},"end":{"row":212,"column":312},"action":"insert","lines":["d"]},{"start":{"row":212,"column":312},"end":{"row":212,"column":313},"action":"insert","lines":["i"]},{"start":{"row":212,"column":313},"end":{"row":212,"column":314},"action":"insert","lines":["s"]},{"start":{"row":212,"column":314},"end":{"row":212,"column":315},"action":"insert","lines":["p"]},{"start":{"row":212,"column":315},"end":{"row":212,"column":316},"action":"insert","lines":["l"]},{"start":{"row":212,"column":316},"end":{"row":212,"column":317},"action":"insert","lines":["a"]},{"start":{"row":212,"column":317},"end":{"row":212,"column":318},"action":"insert","lines":["y"]}],[{"start":{"row":212,"column":318},"end":{"row":212,"column":319},"action":"insert","lines":[" "],"id":3850},{"start":{"row":212,"column":319},"end":{"row":212,"column":320},"action":"insert","lines":["t"]},{"start":{"row":212,"column":320},"end":{"row":212,"column":321},"action":"insert","lines":["h"]},{"start":{"row":212,"column":321},"end":{"row":212,"column":322},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":322},"end":{"row":212,"column":323},"action":"insert","lines":[" "],"id":3851},{"start":{"row":212,"column":323},"end":{"row":212,"column":324},"action":"insert","lines":["r"]},{"start":{"row":212,"column":324},"end":{"row":212,"column":325},"action":"insert","lines":["e"]},{"start":{"row":212,"column":325},"end":{"row":212,"column":326},"action":"insert","lines":["s"]},{"start":{"row":212,"column":326},"end":{"row":212,"column":327},"action":"insert","lines":["u"]},{"start":{"row":212,"column":327},"end":{"row":212,"column":328},"action":"insert","lines":["l"]},{"start":{"row":212,"column":328},"end":{"row":212,"column":329},"action":"insert","lines":["t"]},{"start":{"row":212,"column":329},"end":{"row":212,"column":330},"action":"insert","lines":["s"]}],[{"start":{"row":212,"column":330},"end":{"row":212,"column":331},"action":"insert","lines":["."],"id":3852}],[{"start":{"row":212,"column":331},"end":{"row":212,"column":332},"action":"insert","lines":[" "],"id":3853},{"start":{"row":212,"column":332},"end":{"row":212,"column":333},"action":"insert","lines":["I"]},{"start":{"row":212,"column":333},"end":{"row":212,"column":334},"action":"insert","lines":["f"]}],[{"start":{"row":212,"column":334},"end":{"row":212,"column":335},"action":"insert","lines":[" "],"id":3854},{"start":{"row":212,"column":335},"end":{"row":212,"column":336},"action":"insert","lines":["t"]},{"start":{"row":212,"column":336},"end":{"row":212,"column":337},"action":"insert","lines":["h"]},{"start":{"row":212,"column":337},"end":{"row":212,"column":338},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":338},"end":{"row":212,"column":339},"action":"insert","lines":[" "],"id":3855},{"start":{"row":212,"column":339},"end":{"row":212,"column":340},"action":"insert","lines":["f"]},{"start":{"row":212,"column":340},"end":{"row":212,"column":341},"action":"insert","lines":["o"]},{"start":{"row":212,"column":341},"end":{"row":212,"column":342},"action":"insert","lines":["r"]},{"start":{"row":212,"column":342},"end":{"row":212,"column":343},"action":"insert","lines":["m"]}],[{"start":{"row":212,"column":343},"end":{"row":212,"column":344},"action":"insert","lines":[" "],"id":3856},{"start":{"row":212,"column":344},"end":{"row":212,"column":345},"action":"insert","lines":["d"]},{"start":{"row":212,"column":345},"end":{"row":212,"column":346},"action":"insert","lines":["a"]},{"start":{"row":212,"column":346},"end":{"row":212,"column":347},"action":"insert","lines":["t"]},{"start":{"row":212,"column":347},"end":{"row":212,"column":348},"action":"insert","lines":["a"]},{"start":{"row":212,"column":348},"end":{"row":212,"column":349},"action":"insert","lines":["b"]}],[{"start":{"row":212,"column":349},"end":{"row":212,"column":350},"action":"insert","lines":[" "],"id":3857}],[{"start":{"row":212,"column":349},"end":{"row":212,"column":350},"action":"remove","lines":[" "],"id":3858},{"start":{"row":212,"column":348},"end":{"row":212,"column":349},"action":"remove","lines":["b"]}],[{"start":{"row":212,"column":348},"end":{"row":212,"column":349},"action":"insert","lines":[" "],"id":3859},{"start":{"row":212,"column":349},"end":{"row":212,"column":350},"action":"insert","lines":["i"]},{"start":{"row":212,"column":350},"end":{"row":212,"column":351},"action":"insert","lines":["s"]}],[{"start":{"row":212,"column":351},"end":{"row":212,"column":352},"action":"insert","lines":[" "],"id":3860},{"start":{"row":212,"column":352},"end":{"row":212,"column":353},"action":"insert","lines":["i"]},{"start":{"row":212,"column":353},"end":{"row":212,"column":354},"action":"insert","lines":["n"]},{"start":{"row":212,"column":354},"end":{"row":212,"column":355},"action":"insert","lines":["v"]},{"start":{"row":212,"column":355},"end":{"row":212,"column":356},"action":"insert","lines":["a"]},{"start":{"row":212,"column":356},"end":{"row":212,"column":357},"action":"insert","lines":["l"]},{"start":{"row":212,"column":357},"end":{"row":212,"column":358},"action":"insert","lines":["i"]},{"start":{"row":212,"column":358},"end":{"row":212,"column":359},"action":"insert","lines":["d"]}],[{"start":{"row":212,"column":359},"end":{"row":212,"column":360},"action":"insert","lines":[" "],"id":3861},{"start":{"row":212,"column":360},"end":{"row":212,"column":361},"action":"insert","lines":["t"]},{"start":{"row":212,"column":361},"end":{"row":212,"column":362},"action":"insert","lines":["h"]},{"start":{"row":212,"column":362},"end":{"row":212,"column":363},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":363},"end":{"row":212,"column":364},"action":"insert","lines":[" "],"id":3862},{"start":{"row":212,"column":364},"end":{"row":212,"column":365},"action":"insert","lines":["u"]},{"start":{"row":212,"column":365},"end":{"row":212,"column":366},"action":"insert","lines":["s"]},{"start":{"row":212,"column":366},"end":{"row":212,"column":367},"action":"insert","lines":["e"]},{"start":{"row":212,"column":367},"end":{"row":212,"column":368},"action":"insert","lines":["r"]}],[{"start":{"row":212,"column":368},"end":{"row":212,"column":369},"action":"insert","lines":[" "],"id":3863},{"start":{"row":212,"column":369},"end":{"row":212,"column":370},"action":"insert","lines":["i"]},{"start":{"row":212,"column":370},"end":{"row":212,"column":371},"action":"insert","lines":["s"]}],[{"start":{"row":212,"column":371},"end":{"row":212,"column":372},"action":"insert","lines":[" "],"id":3864},{"start":{"row":212,"column":372},"end":{"row":212,"column":373},"action":"insert","lines":["r"]},{"start":{"row":212,"column":373},"end":{"row":212,"column":374},"action":"insert","lines":["e"]},{"start":{"row":212,"column":374},"end":{"row":212,"column":375},"action":"insert","lines":["t"]},{"start":{"row":212,"column":375},"end":{"row":212,"column":376},"action":"insert","lines":["u"]},{"start":{"row":212,"column":376},"end":{"row":212,"column":377},"action":"insert","lines":["n"]}],[{"start":{"row":212,"column":376},"end":{"row":212,"column":377},"action":"remove","lines":["n"],"id":3865}],[{"start":{"row":212,"column":376},"end":{"row":212,"column":377},"action":"insert","lines":["r"],"id":3866},{"start":{"row":212,"column":377},"end":{"row":212,"column":378},"action":"insert","lines":["n"]},{"start":{"row":212,"column":378},"end":{"row":212,"column":379},"action":"insert","lines":["e"]},{"start":{"row":212,"column":379},"end":{"row":212,"column":380},"action":"insert","lines":["d"]}],[{"start":{"row":212,"column":380},"end":{"row":212,"column":381},"action":"insert","lines":[" "],"id":3867},{"start":{"row":212,"column":381},"end":{"row":212,"column":382},"action":"insert","lines":["t"]},{"start":{"row":212,"column":382},"end":{"row":212,"column":383},"action":"insert","lines":["o"]}],[{"start":{"row":212,"column":383},"end":{"row":212,"column":384},"action":"insert","lines":[" "],"id":3868},{"start":{"row":212,"column":384},"end":{"row":212,"column":385},"action":"insert","lines":["t"]},{"start":{"row":212,"column":385},"end":{"row":212,"column":386},"action":"insert","lines":["h"]},{"start":{"row":212,"column":386},"end":{"row":212,"column":387},"action":"insert","lines":["e"]}],[{"start":{"row":212,"column":387},"end":{"row":212,"column":388},"action":"insert","lines":[" "],"id":3869},{"start":{"row":212,"column":388},"end":{"row":212,"column":389},"action":"insert","lines":["f"]},{"start":{"row":212,"column":389},"end":{"row":212,"column":390},"action":"insert","lines":["o"]},{"start":{"row":212,"column":390},"end":{"row":212,"column":391},"action":"insert","lines":["r"]},{"start":{"row":212,"column":391},"end":{"row":212,"column":392},"action":"insert","lines":["m"]},{"start":{"row":212,"column":392},"end":{"row":212,"column":393},"action":"insert","lines":["."]}],[{"start":{"row":208,"column":304},"end":{"row":208,"column":305},"action":"insert","lines":["a"],"id":3870},{"start":{"row":208,"column":305},"end":{"row":208,"column":306},"action":"insert","lines":["n"]},{"start":{"row":208,"column":306},"end":{"row":208,"column":307},"action":"insert","lines":["d"]}],[{"start":{"row":208,"column":307},"end":{"row":208,"column":308},"action":"insert","lines":[" "],"id":3871},{"start":{"row":208,"column":308},"end":{"row":208,"column":309},"action":"insert","lines":["M"]}],[{"start":{"row":208,"column":309},"end":{"row":208,"column":310},"action":"insert","lines":["a"],"id":3872},{"start":{"row":208,"column":310},"end":{"row":208,"column":311},"action":"insert","lines":["c"]},{"start":{"row":208,"column":311},"end":{"row":208,"column":312},"action":"insert","lines":["r"]},{"start":{"row":208,"column":312},"end":{"row":208,"column":313},"action":"insert","lines":["o"]}],[{"start":{"row":208,"column":313},"end":{"row":208,"column":314},"action":"insert","lines":[" "],"id":3873}],[{"start":{"row":208,"column":319},"end":{"row":208,"column":320},"action":"insert","lines":["s"],"id":3874}],[{"start":{"row":241,"column":0},"end":{"row":242,"column":0},"action":"insert","lines":["",""],"id":3875},{"start":{"row":242,"column":0},"end":{"row":243,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":242,"column":0},"end":{"row":242,"column":1},"action":"insert","lines":["#"],"id":3876},{"start":{"row":242,"column":1},"end":{"row":242,"column":2},"action":"insert","lines":["#"]},{"start":{"row":242,"column":2},"end":{"row":242,"column":3},"action":"insert","lines":["#"]},{"start":{"row":242,"column":3},"end":{"row":242,"column":4},"action":"insert","lines":["#"]},{"start":{"row":242,"column":4},"end":{"row":242,"column":5},"action":"insert","lines":["#"]}],[{"start":{"row":242,"column":5},"end":{"row":242,"column":6},"action":"insert","lines":[" "],"id":3877},{"start":{"row":242,"column":6},"end":{"row":242,"column":7},"action":"insert","lines":["M"]},{"start":{"row":242,"column":7},"end":{"row":242,"column":8},"action":"insert","lines":["a"]},{"start":{"row":242,"column":8},"end":{"row":242,"column":9},"action":"insert","lines":["c"]},{"start":{"row":242,"column":9},"end":{"row":242,"column":10},"action":"insert","lines":["r"]},{"start":{"row":242,"column":10},"end":{"row":242,"column":11},"action":"insert","lines":["o"]}],[{"start":{"row":242,"column":11},"end":{"row":242,"column":12},"action":"insert","lines":[" "],"id":3878},{"start":{"row":242,"column":12},"end":{"row":242,"column":13},"action":"insert","lines":["f"]},{"start":{"row":242,"column":13},"end":{"row":242,"column":14},"action":"insert","lines":["o"]},{"start":{"row":242,"column":14},"end":{"row":242,"column":15},"action":"insert","lines":["r"]},{"start":{"row":242,"column":15},"end":{"row":242,"column":16},"action":"insert","lines":["m"]}],[{"start":{"row":242,"column":12},"end":{"row":242,"column":16},"action":"remove","lines":["form"],"id":3879},{"start":{"row":242,"column":12},"end":{"row":242,"column":16},"action":"insert","lines":["form"]}],[{"start":{"row":242,"column":16},"end":{"row":243,"column":0},"action":"insert","lines":["",""],"id":3880}],[{"start":{"row":244,"column":0},"end":{"row":244,"column":393},"action":"insert","lines":["For the BMI form, the user enters their height and weight in either Imperial or Metric units. The functions contained within the model do any conversion required and calculate the user's BMI. The function then queries the database for the latest post by the user and directs the user to the bmi results html to display the results. If the form data is invalid the user is returned to the form."],"id":3881}],[{"start":{"row":244,"column":393},"end":{"row":245,"column":0},"action":"insert","lines":["",""],"id":3882}],[{"start":{"row":244,"column":7},"end":{"row":244,"column":11},"action":"remove","lines":[" BMI"],"id":3883},{"start":{"row":244,"column":7},"end":{"row":244,"column":8},"action":"insert","lines":[" "]},{"start":{"row":244,"column":8},"end":{"row":244,"column":9},"action":"insert","lines":["M"]},{"start":{"row":244,"column":9},"end":{"row":244,"column":10},"action":"insert","lines":["A"]},{"start":{"row":244,"column":10},"end":{"row":244,"column":11},"action":"insert","lines":["c"]},{"start":{"row":244,"column":11},"end":{"row":244,"column":12},"action":"insert","lines":["r"]},{"start":{"row":244,"column":12},"end":{"row":244,"column":13},"action":"insert","lines":["o"]}],[{"start":{"row":244,"column":9},"end":{"row":244,"column":10},"action":"remove","lines":["A"],"id":3884}],[{"start":{"row":244,"column":9},"end":{"row":244,"column":10},"action":"insert","lines":["a"],"id":3885}],[{"start":{"row":244,"column":189},"end":{"row":244,"column":192},"action":"remove","lines":["BMI"],"id":3886},{"start":{"row":244,"column":189},"end":{"row":244,"column":190},"action":"insert","lines":["r"]},{"start":{"row":244,"column":190},"end":{"row":244,"column":191},"action":"insert","lines":["e"]},{"start":{"row":244,"column":191},"end":{"row":244,"column":192},"action":"insert","lines":["c"]},{"start":{"row":244,"column":192},"end":{"row":244,"column":193},"action":"insert","lines":["o"]},{"start":{"row":244,"column":193},"end":{"row":244,"column":194},"action":"insert","lines":["m"]},{"start":{"row":244,"column":194},"end":{"row":244,"column":195},"action":"insert","lines":["m"]}],[{"start":{"row":244,"column":189},"end":{"row":244,"column":195},"action":"remove","lines":["recomm"],"id":3887},{"start":{"row":244,"column":189},"end":{"row":244,"column":200},"action":"insert","lines":["recommended"]}],[{"start":{"row":244,"column":200},"end":{"row":244,"column":201},"action":"insert","lines":[" "],"id":3888},{"start":{"row":244,"column":201},"end":{"row":244,"column":202},"action":"insert","lines":["d"]},{"start":{"row":244,"column":202},"end":{"row":244,"column":203},"action":"insert","lines":["a"]},{"start":{"row":244,"column":203},"end":{"row":244,"column":204},"action":"insert","lines":["i"]},{"start":{"row":244,"column":204},"end":{"row":244,"column":205},"action":"insert","lines":["l"]},{"start":{"row":244,"column":205},"end":{"row":244,"column":206},"action":"insert","lines":["y"]}],[{"start":{"row":244,"column":206},"end":{"row":244,"column":207},"action":"insert","lines":[" "],"id":3889},{"start":{"row":244,"column":207},"end":{"row":244,"column":208},"action":"insert","lines":["c"]},{"start":{"row":244,"column":208},"end":{"row":244,"column":209},"action":"insert","lines":["a"]},{"start":{"row":244,"column":209},"end":{"row":244,"column":210},"action":"insert","lines":["l"]},{"start":{"row":244,"column":210},"end":{"row":244,"column":211},"action":"insert","lines":["o"]},{"start":{"row":244,"column":211},"end":{"row":244,"column":212},"action":"insert","lines":["r"]},{"start":{"row":244,"column":212},"end":{"row":244,"column":213},"action":"insert","lines":["i"]},{"start":{"row":244,"column":213},"end":{"row":244,"column":214},"action":"insert","lines":["e"]}],[{"start":{"row":244,"column":214},"end":{"row":244,"column":215},"action":"insert","lines":[" "],"id":3890},{"start":{"row":244,"column":215},"end":{"row":244,"column":216},"action":"insert","lines":["i"]},{"start":{"row":244,"column":216},"end":{"row":244,"column":217},"action":"insert","lines":["n"]},{"start":{"row":244,"column":217},"end":{"row":244,"column":218},"action":"insert","lines":["t"]},{"start":{"row":244,"column":218},"end":{"row":244,"column":219},"action":"insert","lines":["a"]},{"start":{"row":244,"column":219},"end":{"row":244,"column":220},"action":"insert","lines":["k"]},{"start":{"row":244,"column":220},"end":{"row":244,"column":221},"action":"insert","lines":["e"]}],[{"start":{"row":244,"column":221},"end":{"row":244,"column":222},"action":"insert","lines":[" "],"id":3891},{"start":{"row":244,"column":222},"end":{"row":244,"column":223},"action":"insert","lines":["a"]},{"start":{"row":244,"column":223},"end":{"row":244,"column":224},"action":"insert","lines":["n"]},{"start":{"row":244,"column":224},"end":{"row":244,"column":225},"action":"insert","lines":["d"]}],[{"start":{"row":244,"column":225},"end":{"row":244,"column":226},"action":"insert","lines":[" "],"id":3892},{"start":{"row":244,"column":226},"end":{"row":244,"column":227},"action":"insert","lines":["m"]},{"start":{"row":244,"column":227},"end":{"row":244,"column":228},"action":"insert","lines":["a"]},{"start":{"row":244,"column":228},"end":{"row":244,"column":229},"action":"insert","lines":["c"]},{"start":{"row":244,"column":229},"end":{"row":244,"column":230},"action":"insert","lines":["r"]},{"start":{"row":244,"column":230},"end":{"row":244,"column":231},"action":"insert","lines":["o"]},{"start":{"row":244,"column":231},"end":{"row":244,"column":232},"action":"insert","lines":["n"]},{"start":{"row":244,"column":232},"end":{"row":244,"column":233},"action":"insert","lines":["u"]},{"start":{"row":244,"column":233},"end":{"row":244,"column":234},"action":"insert","lines":["t"]}],[{"start":{"row":244,"column":234},"end":{"row":244,"column":235},"action":"insert","lines":["r"],"id":3893},{"start":{"row":244,"column":235},"end":{"row":244,"column":236},"action":"insert","lines":["i"]},{"start":{"row":244,"column":236},"end":{"row":244,"column":237},"action":"insert","lines":["e"]},{"start":{"row":244,"column":237},"end":{"row":244,"column":238},"action":"insert","lines":["n"]}],[{"start":{"row":244,"column":226},"end":{"row":244,"column":238},"action":"remove","lines":["macronutrien"],"id":3894},{"start":{"row":244,"column":226},"end":{"row":244,"column":239},"action":"insert","lines":["macronutrient"]}],[{"start":{"row":244,"column":239},"end":{"row":244,"column":240},"action":"insert","lines":[" "],"id":3895},{"start":{"row":244,"column":240},"end":{"row":244,"column":241},"action":"insert","lines":["r"]},{"start":{"row":244,"column":241},"end":{"row":244,"column":242},"action":"insert","lines":["a"]},{"start":{"row":244,"column":242},"end":{"row":244,"column":243},"action":"insert","lines":["t"]},{"start":{"row":244,"column":243},"end":{"row":244,"column":244},"action":"insert","lines":["i"]},{"start":{"row":244,"column":244},"end":{"row":244,"column":245},"action":"insert","lines":["o"]},{"start":{"row":244,"column":245},"end":{"row":244,"column":246},"action":"insert","lines":["s"]}],[{"start":{"row":244,"column":246},"end":{"row":244,"column":247},"action":"insert","lines":[" "],"id":3896},{"start":{"row":244,"column":247},"end":{"row":244,"column":248},"action":"insert","lines":["b"]},{"start":{"row":244,"column":248},"end":{"row":244,"column":249},"action":"insert","lines":["a"]},{"start":{"row":244,"column":249},"end":{"row":244,"column":250},"action":"insert","lines":["s"]},{"start":{"row":244,"column":250},"end":{"row":244,"column":251},"action":"insert","lines":["e"]},{"start":{"row":244,"column":251},"end":{"row":244,"column":252},"action":"insert","lines":["d"]}],[{"start":{"row":244,"column":252},"end":{"row":244,"column":253},"action":"insert","lines":[" "],"id":3897},{"start":{"row":244,"column":253},"end":{"row":244,"column":254},"action":"insert","lines":["o"]},{"start":{"row":244,"column":254},"end":{"row":244,"column":255},"action":"insert","lines":["n"]}],[{"start":{"row":244,"column":255},"end":{"row":244,"column":256},"action":"insert","lines":[" "],"id":3898},{"start":{"row":244,"column":256},"end":{"row":244,"column":257},"action":"insert","lines":["u"]},{"start":{"row":244,"column":257},"end":{"row":244,"column":258},"action":"insert","lines":["s"]},{"start":{"row":244,"column":258},"end":{"row":244,"column":259},"action":"insert","lines":["e"]},{"start":{"row":244,"column":259},"end":{"row":244,"column":260},"action":"insert","lines":["r"]}],[{"start":{"row":244,"column":260},"end":{"row":244,"column":261},"action":"insert","lines":[" "],"id":3899},{"start":{"row":244,"column":261},"end":{"row":244,"column":262},"action":"insert","lines":["g"]},{"start":{"row":244,"column":262},"end":{"row":244,"column":263},"action":"insert","lines":["o"]},{"start":{"row":244,"column":263},"end":{"row":244,"column":264},"action":"insert","lines":["l"]},{"start":{"row":244,"column":264},"end":{"row":244,"column":265},"action":"insert","lines":["a"]},{"start":{"row":244,"column":265},"end":{"row":244,"column":266},"action":"insert","lines":["s"]}],[{"start":{"row":244,"column":367},"end":{"row":244,"column":371},"action":"remove","lines":["bmi "],"id":3900},{"start":{"row":244,"column":367},"end":{"row":244,"column":368},"action":"insert","lines":["m"]},{"start":{"row":244,"column":368},"end":{"row":244,"column":369},"action":"insert","lines":["a"]},{"start":{"row":244,"column":369},"end":{"row":244,"column":370},"action":"insert","lines":["c"]},{"start":{"row":244,"column":370},"end":{"row":244,"column":371},"action":"insert","lines":["r"]},{"start":{"row":244,"column":371},"end":{"row":244,"column":372},"action":"insert","lines":["o"]}],[{"start":{"row":244,"column":372},"end":{"row":244,"column":373},"action":"insert","lines":[" "],"id":3901}],[{"start":{"row":244,"column":471},"end":{"row":245,"column":0},"action":"insert","lines":["",""],"id":3902},{"start":{"row":245,"column":0},"end":{"row":246,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":246,"column":0},"end":{"row":287,"column":61},"action":"insert","lines":["@login_required","def macro_form(request):","    # Create form instance","    form = macro(request.POST)","    # Validate form","    if form.is_valid():","        # Get form data","        height = form.cleaned_data['height']","        weight = form.cleaned_data['weight']","        age = form.cleaned_data['age']","        activity_level = form.cleaned_data['activity_level']","        aim = form.cleaned_data['aim']","        # Create model instance","        macro_calc = Macro()","        # Assign data to model instance","        macro_calc.height= height","        macro_calc.weight= weight","        macro_calc.age = age","        macro_calc.activity_level = activity_level","        macro_calc.aim = aim","        form_save= form.save(commit=False)","        form_save.user= request.user","        # Save model instance","        form_save.save()","        # Search database for model instance ","        details = Macro.objects.filter(user=request.user).order_by('-date')[:1]","        # Extract weight and percentage data from macro database search","        for item in details:","            carb_weight = item.carb_weight","            protein_weight = item.protein_weight","            fat_weight = item.fat_weight","            carb_percent = 100*item.carb_percent","            protein_percent = 100*item.protein_percent","            fat_percent = 100*item.fat_percent","        # Create macro array","        macros = [carb_weight, protein_weight, fat_weight, carb_percent, protein_percent, fat_percent]","        # Convert array to JSON","        macros_json = json.dumps(macros)","        # Render macro results page passing details and macro_json as arguments","        return render(request, 'macro_result.html', {'details': details, 'macros': macros_json})","    # Render macro form","    return render(request, 'macro_form.html', {'form': form})"],"id":3903}],[{"start":{"row":246,"column":0},"end":{"row":246,"column":4},"action":"insert","lines":["    "],"id":3904},{"start":{"row":247,"column":0},"end":{"row":247,"column":4},"action":"insert","lines":["    "]},{"start":{"row":248,"column":0},"end":{"row":248,"column":4},"action":"insert","lines":["    "]},{"start":{"row":249,"column":0},"end":{"row":249,"column":4},"action":"insert","lines":["    "]},{"start":{"row":250,"column":0},"end":{"row":250,"column":4},"action":"insert","lines":["    "]},{"start":{"row":251,"column":0},"end":{"row":251,"column":4},"action":"insert","lines":["    "]},{"start":{"row":252,"column":0},"end":{"row":252,"column":4},"action":"insert","lines":["    "]},{"start":{"row":253,"column":0},"end":{"row":253,"column":4},"action":"insert","lines":["    "]},{"start":{"row":254,"column":0},"end":{"row":254,"column":4},"action":"insert","lines":["    "]},{"start":{"row":255,"column":0},"end":{"row":255,"column":4},"action":"insert","lines":["    "]},{"start":{"row":256,"column":0},"end":{"row":256,"column":4},"action":"insert","lines":["    "]},{"start":{"row":257,"column":0},"end":{"row":257,"column":4},"action":"insert","lines":["    "]},{"start":{"row":258,"column":0},"end":{"row":258,"column":4},"action":"insert","lines":["    "]},{"start":{"row":259,"column":0},"end":{"row":259,"column":4},"action":"insert","lines":["    "]},{"start":{"row":260,"column":0},"end":{"row":260,"column":4},"action":"insert","lines":["    "]},{"start":{"row":261,"column":0},"end":{"row":261,"column":4},"action":"insert","lines":["    "]},{"start":{"row":262,"column":0},"end":{"row":262,"column":4},"action":"insert","lines":["    "]},{"start":{"row":263,"column":0},"end":{"row":263,"column":4},"action":"insert","lines":["    "]},{"start":{"row":264,"column":0},"end":{"row":264,"column":4},"action":"insert","lines":["    "]},{"start":{"row":265,"column":0},"end":{"row":265,"column":4},"action":"insert","lines":["    "]},{"start":{"row":266,"column":0},"end":{"row":266,"column":4},"action":"insert","lines":["    "]},{"start":{"row":267,"column":0},"end":{"row":267,"column":4},"action":"insert","lines":["    "]},{"start":{"row":268,"column":0},"end":{"row":268,"column":4},"action":"insert","lines":["    "]},{"start":{"row":269,"column":0},"end":{"row":269,"column":4},"action":"insert","lines":["    "]},{"start":{"row":270,"column":0},"end":{"row":270,"column":4},"action":"insert","lines":["    "]},{"start":{"row":271,"column":0},"end":{"row":271,"column":4},"action":"insert","lines":["    "]},{"start":{"row":272,"column":0},"end":{"row":272,"column":4},"action":"insert","lines":["    "]},{"start":{"row":273,"column":0},"end":{"row":273,"column":4},"action":"insert","lines":["    "]},{"start":{"row":274,"column":0},"end":{"row":274,"column":4},"action":"insert","lines":["    "]},{"start":{"row":275,"column":0},"end":{"row":275,"column":4},"action":"insert","lines":["    "]},{"start":{"row":276,"column":0},"end":{"row":276,"column":4},"action":"insert","lines":["    "]},{"start":{"row":277,"column":0},"end":{"row":277,"column":4},"action":"insert","lines":["    "]},{"start":{"row":278,"column":0},"end":{"row":278,"column":4},"action":"insert","lines":["    "]},{"start":{"row":279,"column":0},"end":{"row":279,"column":4},"action":"insert","lines":["    "]},{"start":{"row":280,"column":0},"end":{"row":280,"column":4},"action":"insert","lines":["    "]},{"start":{"row":281,"column":0},"end":{"row":281,"column":4},"action":"insert","lines":["    "]},{"start":{"row":282,"column":0},"end":{"row":282,"column":4},"action":"insert","lines":["    "]},{"start":{"row":283,"column":0},"end":{"row":283,"column":4},"action":"insert","lines":["    "]},{"start":{"row":284,"column":0},"end":{"row":284,"column":4},"action":"insert","lines":["    "]},{"start":{"row":285,"column":0},"end":{"row":285,"column":4},"action":"insert","lines":["    "]},{"start":{"row":286,"column":0},"end":{"row":286,"column":4},"action":"insert","lines":["    "]},{"start":{"row":287,"column":0},"end":{"row":287,"column":4},"action":"insert","lines":["    "]}]]},"ace":{"folds":[],"scrolltop":4946,"scrollleft":0,"selection":{"start":{"row":246,"column":19},"end":{"row":246,"column":19},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":{"row":290,"state":"allowBlock","mode":"ace/mode/markdown"}},"timestamp":1598274914346}