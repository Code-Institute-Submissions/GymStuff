{"filter":false,"title":"views.py","tooltip":"/customer_reviews/views.py","ace":{"folds":[],"scrolltop":9,"scrollleft":0,"selection":{"start":{"row":7,"column":0},"end":{"row":7,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"db1c8271a1f5c34ea28713d919144e83dd6cb6c7","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":38,"column":4},"end":{"row":38,"column":48},"action":"remove","lines":["product = Product.objects.get(pk=product_id)"],"id":960}],[{"start":{"row":39,"column":87},"end":{"row":40,"column":0},"action":"insert","lines":["",""],"id":961},{"start":{"row":40,"column":0},"end":{"row":40,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":40,"column":4},"end":{"row":40,"column":48},"action":"insert","lines":["product = Product.objects.get(pk=product_id)"],"id":962}],[{"start":{"row":39,"column":76},"end":{"row":39,"column":78},"action":"insert","lines":["''"],"id":963}],[{"start":{"row":39,"column":77},"end":{"row":39,"column":78},"action":"insert","lines":["u"],"id":964},{"start":{"row":39,"column":78},"end":{"row":39,"column":79},"action":"insert","lines":["s"]},{"start":{"row":39,"column":79},"end":{"row":39,"column":80},"action":"insert","lines":["e"]},{"start":{"row":39,"column":80},"end":{"row":39,"column":81},"action":"insert","lines":["r"]},{"start":{"row":39,"column":81},"end":{"row":39,"column":82},"action":"insert","lines":["n"]},{"start":{"row":39,"column":82},"end":{"row":39,"column":83},"action":"insert","lines":["a"]},{"start":{"row":39,"column":83},"end":{"row":39,"column":84},"action":"insert","lines":["m"]},{"start":{"row":39,"column":84},"end":{"row":39,"column":85},"action":"insert","lines":["e"]}],[{"start":{"row":39,"column":86},"end":{"row":39,"column":87},"action":"insert","lines":[","],"id":965}],[{"start":{"row":39,"column":87},"end":{"row":39,"column":89},"action":"insert","lines":["''"],"id":966}],[{"start":{"row":39,"column":88},"end":{"row":39,"column":89},"action":"insert","lines":["r"],"id":967},{"start":{"row":39,"column":89},"end":{"row":39,"column":90},"action":"insert","lines":["a"]},{"start":{"row":39,"column":90},"end":{"row":39,"column":91},"action":"insert","lines":["t"]},{"start":{"row":39,"column":91},"end":{"row":39,"column":92},"action":"insert","lines":["i"]},{"start":{"row":39,"column":92},"end":{"row":39,"column":93},"action":"insert","lines":["n"]},{"start":{"row":39,"column":93},"end":{"row":39,"column":94},"action":"insert","lines":["g"]}],[{"start":{"row":39,"column":95},"end":{"row":39,"column":96},"action":"insert","lines":[","],"id":968}],[{"start":{"row":39,"column":66},"end":{"row":39,"column":106},"action":"remove","lines":[", fields=('username','rating','review',)"],"id":970},{"start":{"row":39,"column":66},"end":{"row":39,"column":107},"action":"insert","lines":["fields = ('username', 'review', 'rating')"]}],[{"start":{"row":39,"column":66},"end":{"row":39,"column":67},"action":"insert","lines":[","],"id":971}],[{"start":{"row":39,"column":67},"end":{"row":39,"column":68},"action":"insert","lines":[" "],"id":972}],[{"start":{"row":19,"column":0},"end":{"row":19,"column":3},"action":"remove","lines":["'''"],"id":973}],[{"start":{"row":35,"column":0},"end":{"row":51,"column":4},"action":"remove","lines":["'''","","def create_or_edit_review(request, product_id):","    ","    InlineFormSet = inlineformset_factory(Product, customer_review, fields = ('username', 'review', 'rating'))","    product = Product.objects.get(pk=product_id)","    if request.method == \"POST\":","        formset = InlineFormSet(request.POST, request.FILES, instance=product)","        if formset.is_valid():","            formset.save()","            # Do something. Should generally end with a redirect. For example:","            return redirect('index')","    else:","        formset = InlineFormSet(instance=product)","    return render(request, 'review_form.html', {'formset': formset})   ","    ","    "],"id":974}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"insert","lines":["''"],"id":975}],[{"start":{"row":35,"column":2},"end":{"row":35,"column":3},"action":"insert","lines":["'"],"id":976}],[{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"insert","lines":["''"],"id":977}],[{"start":{"row":19,"column":2},"end":{"row":19,"column":3},"action":"insert","lines":["'"],"id":978}],[{"start":{"row":35,"column":3},"end":{"row":36,"column":0},"action":"insert","lines":["",""],"id":979},{"start":{"row":36,"column":0},"end":{"row":37,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":37,"column":0},"end":{"row":56,"column":84},"action":"insert","lines":["def add_review(request, wine_id):","    wine = get_object_or_404(Wine, pk=wine_id)","    form = ReviewForm(request.POST)","    if form.is_valid():","        rating = form.cleaned_data['rating']","        comment = form.cleaned_data['comment']","        user_name = form.cleaned_data['user_name']","        review = Review()","        review.wine = wine","        review.user_name = user_name","        review.rating = rating","        review.comment = comment","        review.pub_date = datetime.datetime.now()","        review.save()","        # Always return an HttpResponseRedirect after successfully dealing","        # with POST data. This prevents data from being posted twice if a","        # user hits the Back button.","        return HttpResponseRedirect(reverse('reviews:wine_detail', args=(wine.id,)))","","    return render(request, 'reviews/wine_detail.html', {'wine': wine, 'form': form})"],"id":980}],[{"start":{"row":37,"column":4},"end":{"row":37,"column":14},"action":"remove","lines":["add_review"],"id":981},{"start":{"row":37,"column":4},"end":{"row":37,"column":25},"action":"insert","lines":["create_or_edit_review"]}],[{"start":{"row":37,"column":35},"end":{"row":37,"column":39},"action":"remove","lines":["wine"],"id":982},{"start":{"row":37,"column":35},"end":{"row":37,"column":36},"action":"insert","lines":["p"]},{"start":{"row":37,"column":36},"end":{"row":37,"column":37},"action":"insert","lines":["r"]},{"start":{"row":37,"column":37},"end":{"row":37,"column":38},"action":"insert","lines":["o"]},{"start":{"row":37,"column":38},"end":{"row":37,"column":39},"action":"insert","lines":["d"]},{"start":{"row":37,"column":39},"end":{"row":37,"column":40},"action":"insert","lines":["u"]},{"start":{"row":37,"column":40},"end":{"row":37,"column":41},"action":"insert","lines":["c"]},{"start":{"row":37,"column":41},"end":{"row":37,"column":42},"action":"insert","lines":["t"]}],[{"start":{"row":38,"column":38},"end":{"row":38,"column":45},"action":"remove","lines":["wine_id"],"id":983},{"start":{"row":38,"column":38},"end":{"row":38,"column":48},"action":"insert","lines":["product_id"]}],[{"start":{"row":38,"column":4},"end":{"row":38,"column":8},"action":"remove","lines":["wine"],"id":984},{"start":{"row":38,"column":4},"end":{"row":38,"column":5},"action":"insert","lines":["p"]},{"start":{"row":38,"column":5},"end":{"row":38,"column":6},"action":"insert","lines":["r"]},{"start":{"row":38,"column":6},"end":{"row":38,"column":7},"action":"insert","lines":["o"]},{"start":{"row":38,"column":7},"end":{"row":38,"column":8},"action":"insert","lines":["d"]},{"start":{"row":38,"column":8},"end":{"row":38,"column":9},"action":"insert","lines":["u"]},{"start":{"row":38,"column":9},"end":{"row":38,"column":10},"action":"insert","lines":["c"]},{"start":{"row":38,"column":10},"end":{"row":38,"column":11},"action":"insert","lines":["t"]}],[{"start":{"row":38,"column":32},"end":{"row":38,"column":36},"action":"remove","lines":["Wine"],"id":985},{"start":{"row":38,"column":32},"end":{"row":38,"column":33},"action":"insert","lines":["P"]},{"start":{"row":38,"column":33},"end":{"row":38,"column":34},"action":"insert","lines":["r"]},{"start":{"row":38,"column":34},"end":{"row":38,"column":35},"action":"insert","lines":["o"]},{"start":{"row":38,"column":35},"end":{"row":38,"column":36},"action":"insert","lines":["d"]},{"start":{"row":38,"column":36},"end":{"row":38,"column":37},"action":"insert","lines":["u"]},{"start":{"row":38,"column":37},"end":{"row":38,"column":38},"action":"insert","lines":["c"]},{"start":{"row":38,"column":38},"end":{"row":38,"column":39},"action":"insert","lines":["t"]}],[{"start":{"row":42,"column":9},"end":{"row":42,"column":15},"action":"remove","lines":["omment"],"id":986},{"start":{"row":42,"column":9},"end":{"row":42,"column":10},"action":"insert","lines":["r"]},{"start":{"row":42,"column":10},"end":{"row":42,"column":11},"action":"insert","lines":["e"]},{"start":{"row":42,"column":11},"end":{"row":42,"column":12},"action":"insert","lines":["v"]}],[{"start":{"row":42,"column":11},"end":{"row":42,"column":12},"action":"remove","lines":["v"],"id":987},{"start":{"row":42,"column":10},"end":{"row":42,"column":11},"action":"remove","lines":["e"]},{"start":{"row":42,"column":9},"end":{"row":42,"column":10},"action":"remove","lines":["r"]},{"start":{"row":42,"column":8},"end":{"row":42,"column":9},"action":"remove","lines":["c"]}],[{"start":{"row":42,"column":8},"end":{"row":42,"column":9},"action":"insert","lines":["r"],"id":988},{"start":{"row":42,"column":9},"end":{"row":42,"column":10},"action":"insert","lines":["e"]},{"start":{"row":42,"column":10},"end":{"row":42,"column":11},"action":"insert","lines":["v"]},{"start":{"row":42,"column":11},"end":{"row":42,"column":12},"action":"insert","lines":["i"]},{"start":{"row":42,"column":12},"end":{"row":42,"column":13},"action":"insert","lines":["e"]},{"start":{"row":42,"column":13},"end":{"row":42,"column":14},"action":"insert","lines":["w"]}],[{"start":{"row":42,"column":36},"end":{"row":42,"column":43},"action":"remove","lines":["comment"],"id":989},{"start":{"row":42,"column":36},"end":{"row":42,"column":37},"action":"insert","lines":["r"]},{"start":{"row":42,"column":37},"end":{"row":42,"column":38},"action":"insert","lines":["e"]},{"start":{"row":42,"column":38},"end":{"row":42,"column":39},"action":"insert","lines":["v"]},{"start":{"row":42,"column":39},"end":{"row":42,"column":40},"action":"insert","lines":["i"]},{"start":{"row":42,"column":40},"end":{"row":42,"column":41},"action":"insert","lines":["e"]},{"start":{"row":42,"column":41},"end":{"row":42,"column":42},"action":"insert","lines":["w"]}],[{"start":{"row":43,"column":12},"end":{"row":43,"column":13},"action":"remove","lines":["_"],"id":990}],[{"start":{"row":43,"column":42},"end":{"row":43,"column":43},"action":"remove","lines":["_"],"id":991}],[{"start":{"row":44,"column":17},"end":{"row":44,"column":23},"action":"remove","lines":["Review"],"id":992},{"start":{"row":44,"column":17},"end":{"row":44,"column":18},"action":"insert","lines":["c"]},{"start":{"row":44,"column":18},"end":{"row":44,"column":19},"action":"insert","lines":["u"]},{"start":{"row":44,"column":19},"end":{"row":44,"column":20},"action":"insert","lines":["s"]}],[{"start":{"row":44,"column":17},"end":{"row":44,"column":20},"action":"remove","lines":["cus"],"id":993},{"start":{"row":44,"column":17},"end":{"row":44,"column":32},"action":"insert","lines":["customer_review"]}],[{"start":{"row":45,"column":15},"end":{"row":45,"column":19},"action":"remove","lines":["wine"],"id":994},{"start":{"row":45,"column":15},"end":{"row":45,"column":16},"action":"insert","lines":["p"]},{"start":{"row":45,"column":16},"end":{"row":45,"column":17},"action":"insert","lines":["r"]},{"start":{"row":45,"column":17},"end":{"row":45,"column":18},"action":"insert","lines":["o"]},{"start":{"row":45,"column":18},"end":{"row":45,"column":19},"action":"insert","lines":["d"]},{"start":{"row":45,"column":19},"end":{"row":45,"column":20},"action":"insert","lines":["u"]},{"start":{"row":45,"column":20},"end":{"row":45,"column":21},"action":"insert","lines":["c"]},{"start":{"row":45,"column":21},"end":{"row":45,"column":22},"action":"insert","lines":["t"]}],[{"start":{"row":45,"column":25},"end":{"row":45,"column":29},"action":"remove","lines":["wine"],"id":995},{"start":{"row":45,"column":25},"end":{"row":45,"column":26},"action":"insert","lines":["p"]},{"start":{"row":45,"column":26},"end":{"row":45,"column":27},"action":"insert","lines":["r"]},{"start":{"row":45,"column":27},"end":{"row":45,"column":28},"action":"insert","lines":["o"]},{"start":{"row":45,"column":28},"end":{"row":45,"column":29},"action":"insert","lines":["d"]},{"start":{"row":45,"column":29},"end":{"row":45,"column":30},"action":"insert","lines":["u"]},{"start":{"row":45,"column":30},"end":{"row":45,"column":31},"action":"insert","lines":["c"]},{"start":{"row":45,"column":31},"end":{"row":45,"column":32},"action":"insert","lines":["t"]}],[{"start":{"row":46,"column":19},"end":{"row":46,"column":20},"action":"remove","lines":["_"],"id":996}],[{"start":{"row":46,"column":30},"end":{"row":46,"column":31},"action":"remove","lines":["_"],"id":997}],[{"start":{"row":48,"column":15},"end":{"row":48,"column":22},"action":"remove","lines":["comment"],"id":998},{"start":{"row":48,"column":15},"end":{"row":48,"column":16},"action":"insert","lines":["r"]},{"start":{"row":48,"column":16},"end":{"row":48,"column":17},"action":"insert","lines":["e"]},{"start":{"row":48,"column":17},"end":{"row":48,"column":18},"action":"insert","lines":["v"]},{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"insert","lines":["i"]},{"start":{"row":48,"column":19},"end":{"row":48,"column":20},"action":"insert","lines":["e"]},{"start":{"row":48,"column":20},"end":{"row":48,"column":21},"action":"insert","lines":["w"]}],[{"start":{"row":48,"column":24},"end":{"row":48,"column":31},"action":"remove","lines":["comment"],"id":999},{"start":{"row":48,"column":24},"end":{"row":48,"column":25},"action":"insert","lines":["r"]},{"start":{"row":48,"column":25},"end":{"row":48,"column":26},"action":"insert","lines":["e"]},{"start":{"row":48,"column":26},"end":{"row":48,"column":27},"action":"insert","lines":["v"]},{"start":{"row":48,"column":27},"end":{"row":48,"column":28},"action":"insert","lines":["i"]},{"start":{"row":48,"column":28},"end":{"row":48,"column":29},"action":"insert","lines":["e"]},{"start":{"row":48,"column":29},"end":{"row":48,"column":30},"action":"insert","lines":["w"]}],[{"start":{"row":49,"column":18},"end":{"row":49,"column":19},"action":"remove","lines":["_"],"id":1000},{"start":{"row":49,"column":17},"end":{"row":49,"column":18},"action":"remove","lines":["b"]},{"start":{"row":49,"column":16},"end":{"row":49,"column":17},"action":"remove","lines":["u"]},{"start":{"row":49,"column":15},"end":{"row":49,"column":16},"action":"remove","lines":["p"]}],[{"start":{"row":54,"column":45},"end":{"row":54,"column":64},"action":"remove","lines":["reviews:wine_detail"],"id":1001},{"start":{"row":54,"column":45},"end":{"row":54,"column":46},"action":"insert","lines":["p"]},{"start":{"row":54,"column":46},"end":{"row":54,"column":47},"action":"insert","lines":["r"]},{"start":{"row":54,"column":47},"end":{"row":54,"column":48},"action":"insert","lines":["o"]},{"start":{"row":54,"column":48},"end":{"row":54,"column":49},"action":"insert","lines":["d"]},{"start":{"row":54,"column":49},"end":{"row":54,"column":50},"action":"insert","lines":["u"]},{"start":{"row":54,"column":50},"end":{"row":54,"column":51},"action":"insert","lines":["c"]}],[{"start":{"row":54,"column":51},"end":{"row":54,"column":52},"action":"insert","lines":["t"],"id":1002}],[{"start":{"row":54,"column":61},"end":{"row":54,"column":65},"action":"remove","lines":["wine"],"id":1003},{"start":{"row":54,"column":61},"end":{"row":54,"column":62},"action":"insert","lines":["p"]},{"start":{"row":54,"column":62},"end":{"row":54,"column":63},"action":"insert","lines":["r"]},{"start":{"row":54,"column":63},"end":{"row":54,"column":64},"action":"insert","lines":["o"]},{"start":{"row":54,"column":64},"end":{"row":54,"column":65},"action":"insert","lines":["d"]},{"start":{"row":54,"column":65},"end":{"row":54,"column":66},"action":"insert","lines":["u"]},{"start":{"row":54,"column":66},"end":{"row":54,"column":67},"action":"insert","lines":["c"]},{"start":{"row":54,"column":67},"end":{"row":54,"column":68},"action":"insert","lines":["t"]}],[{"start":{"row":56,"column":34},"end":{"row":56,"column":47},"action":"remove","lines":["s/wine_detail"],"id":1004},{"start":{"row":56,"column":34},"end":{"row":56,"column":35},"action":"insert","lines":["_"]},{"start":{"row":56,"column":35},"end":{"row":56,"column":36},"action":"insert","lines":["f"]},{"start":{"row":56,"column":36},"end":{"row":56,"column":37},"action":"insert","lines":["o"]},{"start":{"row":56,"column":37},"end":{"row":56,"column":38},"action":"insert","lines":["r"]},{"start":{"row":56,"column":38},"end":{"row":56,"column":39},"action":"insert","lines":["m"]}],[{"start":{"row":56,"column":49},"end":{"row":56,"column":53},"action":"remove","lines":["wine"],"id":1005},{"start":{"row":56,"column":49},"end":{"row":56,"column":50},"action":"insert","lines":["p"]},{"start":{"row":56,"column":50},"end":{"row":56,"column":51},"action":"insert","lines":["r"]},{"start":{"row":56,"column":51},"end":{"row":56,"column":52},"action":"insert","lines":["o"]},{"start":{"row":56,"column":52},"end":{"row":56,"column":53},"action":"insert","lines":["d"]},{"start":{"row":56,"column":53},"end":{"row":56,"column":54},"action":"insert","lines":["u"]},{"start":{"row":56,"column":54},"end":{"row":56,"column":55},"action":"insert","lines":["c"]},{"start":{"row":56,"column":55},"end":{"row":56,"column":56},"action":"insert","lines":["t"]}],[{"start":{"row":56,"column":59},"end":{"row":56,"column":63},"action":"remove","lines":["wine"],"id":1006},{"start":{"row":56,"column":59},"end":{"row":56,"column":60},"action":"insert","lines":["p"]},{"start":{"row":56,"column":60},"end":{"row":56,"column":61},"action":"insert","lines":["r"]},{"start":{"row":56,"column":61},"end":{"row":56,"column":62},"action":"insert","lines":["o"]},{"start":{"row":56,"column":62},"end":{"row":56,"column":63},"action":"insert","lines":["d"]},{"start":{"row":56,"column":63},"end":{"row":56,"column":64},"action":"insert","lines":["u"]},{"start":{"row":56,"column":64},"end":{"row":56,"column":65},"action":"insert","lines":["c"]},{"start":{"row":56,"column":65},"end":{"row":56,"column":66},"action":"insert","lines":["t"]}],[{"start":{"row":54,"column":45},"end":{"row":54,"column":73},"action":"remove","lines":["product', args=(product.id,)"],"id":1007},{"start":{"row":54,"column":45},"end":{"row":54,"column":46},"action":"insert","lines":["i"]},{"start":{"row":54,"column":46},"end":{"row":54,"column":47},"action":"insert","lines":["n"]},{"start":{"row":54,"column":47},"end":{"row":54,"column":48},"action":"insert","lines":["d"]},{"start":{"row":54,"column":48},"end":{"row":54,"column":49},"action":"insert","lines":["e"]},{"start":{"row":54,"column":49},"end":{"row":54,"column":50},"action":"insert","lines":["x"]},{"start":{"row":54,"column":50},"end":{"row":54,"column":51},"action":"insert","lines":["'"]}],[{"start":{"row":35,"column":0},"end":{"row":56,"column":82},"action":"remove","lines":["'''","","def create_or_edit_review(request, product_id):","    product = get_object_or_404(Product, pk=product_id)","    form = ReviewForm(request.POST)","    if form.is_valid():","        rating = form.cleaned_data['rating']","        review = form.cleaned_data['review']","        username = form.cleaned_data['username']","        review = customer_review()","        review.product = product","        review.username = username","        review.rating = rating","        review.review = review","        review.date = datetime.datetime.now()","        review.save()","        # Always return an HttpResponseRedirect after successfully dealing","        # with POST data. This prevents data from being posted twice if a","        # user hits the Back button.","        return HttpResponseRedirect(reverse('index'))","","    return render(request, 'review_form.html', {'product': product, 'form': form})"],"id":1008}],[{"start":{"row":19,"column":2},"end":{"row":19,"column":3},"action":"remove","lines":["'"],"id":1009},{"start":{"row":19,"column":1},"end":{"row":19,"column":2},"action":"remove","lines":["'"]},{"start":{"row":19,"column":0},"end":{"row":19,"column":1},"action":"remove","lines":["'"]}],[{"start":{"row":19,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["",""],"id":1010}],[{"start":{"row":20,"column":0},"end":{"row":20,"column":2},"action":"insert","lines":["''"],"id":1011}],[{"start":{"row":20,"column":2},"end":{"row":20,"column":3},"action":"insert","lines":["'"],"id":1012}],[{"start":{"row":36,"column":0},"end":{"row":36,"column":2},"action":"insert","lines":["''"],"id":1013}],[{"start":{"row":36,"column":2},"end":{"row":36,"column":3},"action":"insert","lines":["'"],"id":1014}],[{"start":{"row":36,"column":3},"end":{"row":37,"column":0},"action":"insert","lines":["",""],"id":1015},{"start":{"row":37,"column":0},"end":{"row":38,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":38,"column":0},"end":{"row":57,"column":84},"action":"insert","lines":["def add_review(request, wine_id):","    wine = get_object_or_404(Wine, pk=wine_id)","    form = ReviewForm(request.POST)","    if form.is_valid():","        rating = form.cleaned_data['rating']","        comment = form.cleaned_data['comment']","        user_name = form.cleaned_data['user_name']","        review = Review()","        review.wine = wine","        review.user_name = user_name","        review.rating = rating","        review.comment = comment","        review.pub_date = datetime.datetime.now()","        review.save()","        # Always return an HttpResponseRedirect after successfully dealing","        # with POST data. This prevents data from being posted twice if a","        # user hits the Back button.","        return HttpResponseRedirect(reverse('reviews:wine_detail', args=(wine.id,)))","","    return render(request, 'reviews/wine_detail.html', {'wine': wine, 'form': form})"],"id":1016}],[{"start":{"row":38,"column":4},"end":{"row":38,"column":14},"action":"remove","lines":["add_review"],"id":1017},{"start":{"row":38,"column":4},"end":{"row":38,"column":25},"action":"insert","lines":["create_or_edit_review"]}],[{"start":{"row":38,"column":35},"end":{"row":38,"column":39},"action":"remove","lines":["wine"],"id":1018},{"start":{"row":38,"column":35},"end":{"row":38,"column":36},"action":"insert","lines":["p"]},{"start":{"row":38,"column":36},"end":{"row":38,"column":37},"action":"insert","lines":["r"]},{"start":{"row":38,"column":37},"end":{"row":38,"column":38},"action":"insert","lines":["o"]},{"start":{"row":38,"column":38},"end":{"row":38,"column":39},"action":"insert","lines":["d"]},{"start":{"row":38,"column":39},"end":{"row":38,"column":40},"action":"insert","lines":["u"]},{"start":{"row":38,"column":40},"end":{"row":38,"column":41},"action":"insert","lines":["c"]},{"start":{"row":38,"column":41},"end":{"row":38,"column":42},"action":"insert","lines":["t"]}],[{"start":{"row":39,"column":4},"end":{"row":39,"column":8},"action":"remove","lines":["wine"],"id":1019},{"start":{"row":39,"column":4},"end":{"row":39,"column":5},"action":"insert","lines":["p"]},{"start":{"row":39,"column":5},"end":{"row":39,"column":6},"action":"insert","lines":["r"]},{"start":{"row":39,"column":6},"end":{"row":39,"column":7},"action":"insert","lines":["o"]},{"start":{"row":39,"column":7},"end":{"row":39,"column":8},"action":"insert","lines":["d"]},{"start":{"row":39,"column":8},"end":{"row":39,"column":9},"action":"insert","lines":["u"]},{"start":{"row":39,"column":9},"end":{"row":39,"column":10},"action":"insert","lines":["c"]},{"start":{"row":39,"column":10},"end":{"row":39,"column":11},"action":"insert","lines":["t"]}],[{"start":{"row":39,"column":32},"end":{"row":39,"column":36},"action":"remove","lines":["Wine"],"id":1020},{"start":{"row":39,"column":32},"end":{"row":39,"column":33},"action":"insert","lines":["P"]},{"start":{"row":39,"column":33},"end":{"row":39,"column":34},"action":"insert","lines":["r"]},{"start":{"row":39,"column":34},"end":{"row":39,"column":35},"action":"insert","lines":["o"]},{"start":{"row":39,"column":35},"end":{"row":39,"column":36},"action":"insert","lines":["d"]},{"start":{"row":39,"column":36},"end":{"row":39,"column":37},"action":"insert","lines":["u"]},{"start":{"row":39,"column":37},"end":{"row":39,"column":38},"action":"insert","lines":["c"]},{"start":{"row":39,"column":38},"end":{"row":39,"column":39},"action":"insert","lines":["t"]}],[{"start":{"row":39,"column":44},"end":{"row":39,"column":48},"action":"remove","lines":["wine"],"id":1021},{"start":{"row":39,"column":44},"end":{"row":39,"column":45},"action":"insert","lines":["p"]},{"start":{"row":39,"column":45},"end":{"row":39,"column":46},"action":"insert","lines":["r"]},{"start":{"row":39,"column":46},"end":{"row":39,"column":47},"action":"insert","lines":["o"]},{"start":{"row":39,"column":47},"end":{"row":39,"column":48},"action":"insert","lines":["d"]},{"start":{"row":39,"column":48},"end":{"row":39,"column":49},"action":"insert","lines":["u"]},{"start":{"row":39,"column":49},"end":{"row":39,"column":50},"action":"insert","lines":["c"]},{"start":{"row":39,"column":50},"end":{"row":39,"column":51},"action":"insert","lines":["t"]}],[{"start":{"row":45,"column":17},"end":{"row":45,"column":23},"action":"remove","lines":["Review"],"id":1022},{"start":{"row":45,"column":17},"end":{"row":45,"column":18},"action":"insert","lines":["c"]},{"start":{"row":45,"column":18},"end":{"row":45,"column":19},"action":"insert","lines":["u"]},{"start":{"row":45,"column":19},"end":{"row":45,"column":20},"action":"insert","lines":["s"]},{"start":{"row":45,"column":20},"end":{"row":45,"column":21},"action":"insert","lines":["t"]},{"start":{"row":45,"column":21},"end":{"row":45,"column":22},"action":"insert","lines":["o"]},{"start":{"row":45,"column":22},"end":{"row":45,"column":23},"action":"insert","lines":["m"]},{"start":{"row":45,"column":23},"end":{"row":45,"column":24},"action":"insert","lines":["e"]},{"start":{"row":45,"column":24},"end":{"row":45,"column":25},"action":"insert","lines":["r"]}],[{"start":{"row":45,"column":17},"end":{"row":45,"column":25},"action":"remove","lines":["customer"],"id":1023},{"start":{"row":45,"column":17},"end":{"row":45,"column":32},"action":"insert","lines":["customer_review"]}],[{"start":{"row":43,"column":37},"end":{"row":43,"column":44},"action":"remove","lines":["comment"],"id":1024},{"start":{"row":43,"column":37},"end":{"row":43,"column":38},"action":"insert","lines":["r"]},{"start":{"row":43,"column":38},"end":{"row":43,"column":39},"action":"insert","lines":["e"]},{"start":{"row":43,"column":39},"end":{"row":43,"column":40},"action":"insert","lines":["v"]},{"start":{"row":43,"column":40},"end":{"row":43,"column":41},"action":"insert","lines":["i"]},{"start":{"row":43,"column":41},"end":{"row":43,"column":42},"action":"insert","lines":["e"]},{"start":{"row":43,"column":42},"end":{"row":43,"column":43},"action":"insert","lines":["w"]}],[{"start":{"row":43,"column":8},"end":{"row":43,"column":15},"action":"remove","lines":["comment"],"id":1025},{"start":{"row":43,"column":8},"end":{"row":43,"column":9},"action":"insert","lines":["r"]},{"start":{"row":43,"column":9},"end":{"row":43,"column":10},"action":"insert","lines":["e"]},{"start":{"row":43,"column":10},"end":{"row":43,"column":11},"action":"insert","lines":["v"]},{"start":{"row":43,"column":11},"end":{"row":43,"column":12},"action":"insert","lines":["i"]},{"start":{"row":43,"column":12},"end":{"row":43,"column":13},"action":"insert","lines":["e"]},{"start":{"row":43,"column":13},"end":{"row":43,"column":14},"action":"insert","lines":["w"]}],[{"start":{"row":44,"column":12},"end":{"row":44,"column":13},"action":"remove","lines":["_"],"id":1026}],[{"start":{"row":44,"column":42},"end":{"row":44,"column":43},"action":"remove","lines":["_"],"id":1027}],[{"start":{"row":46,"column":15},"end":{"row":46,"column":19},"action":"remove","lines":["wine"],"id":1028},{"start":{"row":46,"column":15},"end":{"row":46,"column":16},"action":"insert","lines":["p"]},{"start":{"row":46,"column":16},"end":{"row":46,"column":17},"action":"insert","lines":["r"]},{"start":{"row":46,"column":17},"end":{"row":46,"column":18},"action":"insert","lines":["o"]},{"start":{"row":46,"column":18},"end":{"row":46,"column":19},"action":"insert","lines":["d"]},{"start":{"row":46,"column":19},"end":{"row":46,"column":20},"action":"insert","lines":["u"]},{"start":{"row":46,"column":20},"end":{"row":46,"column":21},"action":"insert","lines":["c"]},{"start":{"row":46,"column":21},"end":{"row":46,"column":22},"action":"insert","lines":["t"]}],[{"start":{"row":46,"column":25},"end":{"row":46,"column":29},"action":"remove","lines":["wine"],"id":1029},{"start":{"row":46,"column":25},"end":{"row":46,"column":26},"action":"insert","lines":["p"]},{"start":{"row":46,"column":26},"end":{"row":46,"column":27},"action":"insert","lines":["r"]},{"start":{"row":46,"column":27},"end":{"row":46,"column":28},"action":"insert","lines":["o"]},{"start":{"row":46,"column":28},"end":{"row":46,"column":29},"action":"insert","lines":["d"]},{"start":{"row":46,"column":29},"end":{"row":46,"column":30},"action":"insert","lines":["u"]},{"start":{"row":46,"column":30},"end":{"row":46,"column":31},"action":"insert","lines":["c"]},{"start":{"row":46,"column":31},"end":{"row":46,"column":32},"action":"insert","lines":["t"]}],[{"start":{"row":47,"column":19},"end":{"row":47,"column":20},"action":"remove","lines":["_"],"id":1030}],[{"start":{"row":47,"column":30},"end":{"row":47,"column":31},"action":"remove","lines":["_"],"id":1031}],[{"start":{"row":49,"column":15},"end":{"row":49,"column":22},"action":"remove","lines":["comment"],"id":1032},{"start":{"row":49,"column":15},"end":{"row":49,"column":16},"action":"insert","lines":["r"]},{"start":{"row":49,"column":16},"end":{"row":49,"column":17},"action":"insert","lines":["e"]},{"start":{"row":49,"column":17},"end":{"row":49,"column":18},"action":"insert","lines":["v"]},{"start":{"row":49,"column":18},"end":{"row":49,"column":19},"action":"insert","lines":["i"]},{"start":{"row":49,"column":19},"end":{"row":49,"column":20},"action":"insert","lines":["e"]},{"start":{"row":49,"column":20},"end":{"row":49,"column":21},"action":"insert","lines":["w"]}],[{"start":{"row":49,"column":24},"end":{"row":49,"column":31},"action":"remove","lines":["comment"],"id":1033},{"start":{"row":49,"column":24},"end":{"row":49,"column":25},"action":"insert","lines":["r"]},{"start":{"row":49,"column":25},"end":{"row":49,"column":26},"action":"insert","lines":["e"]},{"start":{"row":49,"column":26},"end":{"row":49,"column":27},"action":"insert","lines":["v"]},{"start":{"row":49,"column":27},"end":{"row":49,"column":28},"action":"insert","lines":["i"]},{"start":{"row":49,"column":28},"end":{"row":49,"column":29},"action":"insert","lines":["e"]},{"start":{"row":49,"column":29},"end":{"row":49,"column":30},"action":"insert","lines":["w"]}],[{"start":{"row":50,"column":18},"end":{"row":50,"column":19},"action":"remove","lines":["_"],"id":1034},{"start":{"row":50,"column":17},"end":{"row":50,"column":18},"action":"remove","lines":["b"]},{"start":{"row":50,"column":16},"end":{"row":50,"column":17},"action":"remove","lines":["u"]},{"start":{"row":50,"column":15},"end":{"row":50,"column":16},"action":"remove","lines":["p"]}],[{"start":{"row":55,"column":73},"end":{"row":55,"column":77},"action":"remove","lines":["wine"],"id":1035},{"start":{"row":55,"column":73},"end":{"row":55,"column":74},"action":"insert","lines":["p"]},{"start":{"row":55,"column":74},"end":{"row":55,"column":75},"action":"insert","lines":["r"]},{"start":{"row":55,"column":75},"end":{"row":55,"column":76},"action":"insert","lines":["o"]},{"start":{"row":55,"column":76},"end":{"row":55,"column":77},"action":"insert","lines":["d"]},{"start":{"row":55,"column":77},"end":{"row":55,"column":78},"action":"insert","lines":["u"]},{"start":{"row":55,"column":78},"end":{"row":55,"column":79},"action":"insert","lines":["c"]},{"start":{"row":55,"column":79},"end":{"row":55,"column":80},"action":"insert","lines":["t"]}],[{"start":{"row":55,"column":45},"end":{"row":55,"column":64},"action":"remove","lines":["reviews:wine_detail"],"id":1036},{"start":{"row":55,"column":45},"end":{"row":55,"column":46},"action":"insert","lines":["p"]},{"start":{"row":55,"column":46},"end":{"row":55,"column":47},"action":"insert","lines":["r"]},{"start":{"row":55,"column":47},"end":{"row":55,"column":48},"action":"insert","lines":["o"]},{"start":{"row":55,"column":48},"end":{"row":55,"column":49},"action":"insert","lines":["d"]},{"start":{"row":55,"column":49},"end":{"row":55,"column":50},"action":"insert","lines":["u"]},{"start":{"row":55,"column":50},"end":{"row":55,"column":51},"action":"insert","lines":["c"]},{"start":{"row":55,"column":51},"end":{"row":55,"column":52},"action":"insert","lines":["t"]}],[{"start":{"row":57,"column":28},"end":{"row":57,"column":47},"action":"remove","lines":["reviews/wine_detail"],"id":1037},{"start":{"row":57,"column":28},"end":{"row":57,"column":29},"action":"insert","lines":["p"]},{"start":{"row":57,"column":29},"end":{"row":57,"column":30},"action":"insert","lines":["r"]},{"start":{"row":57,"column":30},"end":{"row":57,"column":31},"action":"insert","lines":["o"]},{"start":{"row":57,"column":31},"end":{"row":57,"column":32},"action":"insert","lines":["d"]},{"start":{"row":57,"column":32},"end":{"row":57,"column":33},"action":"insert","lines":["u"]},{"start":{"row":57,"column":33},"end":{"row":57,"column":34},"action":"insert","lines":["c"]},{"start":{"row":57,"column":34},"end":{"row":57,"column":35},"action":"insert","lines":["t"]}],[{"start":{"row":57,"column":45},"end":{"row":57,"column":49},"action":"remove","lines":["wine"],"id":1038},{"start":{"row":57,"column":45},"end":{"row":57,"column":46},"action":"insert","lines":["p"]},{"start":{"row":57,"column":46},"end":{"row":57,"column":47},"action":"insert","lines":["r"]},{"start":{"row":57,"column":47},"end":{"row":57,"column":48},"action":"insert","lines":["o"]},{"start":{"row":57,"column":48},"end":{"row":57,"column":49},"action":"insert","lines":["d"]},{"start":{"row":57,"column":49},"end":{"row":57,"column":50},"action":"insert","lines":["u"]},{"start":{"row":57,"column":50},"end":{"row":57,"column":51},"action":"insert","lines":["c"]},{"start":{"row":57,"column":51},"end":{"row":57,"column":52},"action":"insert","lines":["t"]}],[{"start":{"row":57,"column":55},"end":{"row":57,"column":59},"action":"remove","lines":["wine"],"id":1039},{"start":{"row":57,"column":55},"end":{"row":57,"column":56},"action":"insert","lines":["p"]},{"start":{"row":57,"column":56},"end":{"row":57,"column":57},"action":"insert","lines":["r"]},{"start":{"row":57,"column":57},"end":{"row":57,"column":58},"action":"insert","lines":["o"]},{"start":{"row":57,"column":58},"end":{"row":57,"column":59},"action":"insert","lines":["d"]},{"start":{"row":57,"column":59},"end":{"row":57,"column":60},"action":"insert","lines":["u"]},{"start":{"row":57,"column":60},"end":{"row":57,"column":61},"action":"insert","lines":["c"]},{"start":{"row":57,"column":61},"end":{"row":57,"column":62},"action":"insert","lines":["t"]}],[{"start":{"row":37,"column":0},"end":{"row":57,"column":78},"action":"remove","lines":["","def create_or_edit_review(request, product_id):","    product = get_object_or_404(Product, pk=product_id)","    form = ReviewForm(request.POST)","    if form.is_valid():","        rating = form.cleaned_data['rating']","        review = form.cleaned_data['review']","        username = form.cleaned_data['username']","        review = customer_review()","        review.product = product","        review.username = username","        review.rating = rating","        review.review = review","        review.date = datetime.datetime.now()","        review.save()","        # Always return an HttpResponseRedirect after successfully dealing","        # with POST data. This prevents data from being posted twice if a","        # user hits the Back button.","        return HttpResponseRedirect(reverse('product', args=(product.id,)))","","    return render(request, 'product.html', {'product': product, 'form': form})"],"id":1040}],[{"start":{"row":13,"column":54},"end":{"row":13,"column":55},"action":"insert","lines":[","],"id":1041}],[{"start":{"row":13,"column":55},"end":{"row":13,"column":56},"action":"insert","lines":[" "],"id":1042}],[{"start":{"row":11,"column":34},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":1043},{"start":{"row":12,"column":0},"end":{"row":12,"column":4},"action":"insert","lines":["    "]},{"start":{"row":12,"column":4},"end":{"row":12,"column":5},"action":"insert","lines":["p"]},{"start":{"row":12,"column":5},"end":{"row":12,"column":6},"action":"insert","lines":["r"]},{"start":{"row":12,"column":6},"end":{"row":12,"column":7},"action":"insert","lines":["o"]},{"start":{"row":12,"column":7},"end":{"row":12,"column":8},"action":"insert","lines":["d"]},{"start":{"row":12,"column":8},"end":{"row":12,"column":9},"action":"insert","lines":["u"]},{"start":{"row":12,"column":9},"end":{"row":12,"column":10},"action":"insert","lines":["c"]},{"start":{"row":12,"column":10},"end":{"row":12,"column":11},"action":"insert","lines":["t"]}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"insert","lines":["="],"id":1044}],[{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"insert","lines":["P"],"id":1045},{"start":{"row":12,"column":13},"end":{"row":12,"column":14},"action":"insert","lines":["r"]},{"start":{"row":12,"column":14},"end":{"row":12,"column":15},"action":"insert","lines":["o"]},{"start":{"row":12,"column":15},"end":{"row":12,"column":16},"action":"insert","lines":["d"]},{"start":{"row":12,"column":16},"end":{"row":12,"column":17},"action":"insert","lines":["u"]},{"start":{"row":12,"column":17},"end":{"row":12,"column":18},"action":"insert","lines":["c"]},{"start":{"row":12,"column":18},"end":{"row":12,"column":19},"action":"insert","lines":["t"]},{"start":{"row":12,"column":19},"end":{"row":12,"column":20},"action":"insert","lines":["s"]}],[{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"insert","lines":["."],"id":1046},{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"insert","lines":["o"]},{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"insert","lines":["b"]},{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"insert","lines":["j"]},{"start":{"row":12,"column":24},"end":{"row":12,"column":25},"action":"insert","lines":["e"]},{"start":{"row":12,"column":25},"end":{"row":12,"column":26},"action":"insert","lines":["c"]},{"start":{"row":12,"column":26},"end":{"row":12,"column":27},"action":"insert","lines":["t"]},{"start":{"row":12,"column":27},"end":{"row":12,"column":28},"action":"insert","lines":["s"]}],[{"start":{"row":12,"column":28},"end":{"row":12,"column":29},"action":"insert","lines":["."],"id":1047},{"start":{"row":12,"column":29},"end":{"row":12,"column":30},"action":"insert","lines":["f"]},{"start":{"row":12,"column":30},"end":{"row":12,"column":31},"action":"insert","lines":["i"]},{"start":{"row":12,"column":31},"end":{"row":12,"column":32},"action":"insert","lines":["l"]},{"start":{"row":12,"column":32},"end":{"row":12,"column":33},"action":"insert","lines":["t"]},{"start":{"row":12,"column":33},"end":{"row":12,"column":34},"action":"insert","lines":["e"]},{"start":{"row":12,"column":34},"end":{"row":12,"column":35},"action":"insert","lines":["r"]}],[{"start":{"row":12,"column":35},"end":{"row":12,"column":37},"action":"insert","lines":["()"],"id":1048}],[{"start":{"row":12,"column":36},"end":{"row":12,"column":37},"action":"insert","lines":["i"],"id":1049},{"start":{"row":12,"column":37},"end":{"row":12,"column":38},"action":"insert","lines":["d"]},{"start":{"row":12,"column":38},"end":{"row":12,"column":39},"action":"insert","lines":["="]},{"start":{"row":12,"column":39},"end":{"row":12,"column":40},"action":"insert","lines":["i"]},{"start":{"row":12,"column":40},"end":{"row":12,"column":41},"action":"insert","lines":["d"]}],[{"start":{"row":8,"column":57},"end":{"row":9,"column":46},"action":"remove","lines":["","from django.forms import inlineformset_factory"],"id":1050}],[{"start":{"row":11,"column":19},"end":{"row":11,"column":20},"action":"remove","lines":["s"],"id":1051}],[{"start":{"row":13,"column":56},"end":{"row":13,"column":58},"action":"insert","lines":["''"],"id":1052}],[{"start":{"row":13,"column":57},"end":{"row":13,"column":58},"action":"insert","lines":["p"],"id":1053},{"start":{"row":13,"column":58},"end":{"row":13,"column":59},"action":"insert","lines":["r"]},{"start":{"row":13,"column":59},"end":{"row":13,"column":60},"action":"insert","lines":["o"]},{"start":{"row":13,"column":60},"end":{"row":13,"column":61},"action":"insert","lines":["d"]},{"start":{"row":13,"column":61},"end":{"row":13,"column":62},"action":"insert","lines":["u"]},{"start":{"row":13,"column":62},"end":{"row":13,"column":63},"action":"insert","lines":["c"]},{"start":{"row":13,"column":63},"end":{"row":13,"column":64},"action":"insert","lines":["t"]}],[{"start":{"row":13,"column":65},"end":{"row":13,"column":66},"action":"insert","lines":[":"],"id":1054},{"start":{"row":13,"column":66},"end":{"row":13,"column":67},"action":"insert","lines":["p"]},{"start":{"row":13,"column":67},"end":{"row":13,"column":68},"action":"insert","lines":["r"]},{"start":{"row":13,"column":68},"end":{"row":13,"column":69},"action":"insert","lines":["o"]},{"start":{"row":13,"column":69},"end":{"row":13,"column":70},"action":"insert","lines":["d"]},{"start":{"row":13,"column":70},"end":{"row":13,"column":71},"action":"insert","lines":["u"]}],[{"start":{"row":13,"column":71},"end":{"row":13,"column":72},"action":"insert","lines":["c"],"id":1055},{"start":{"row":13,"column":72},"end":{"row":13,"column":73},"action":"insert","lines":["t"]}],[{"start":{"row":11,"column":4},"end":{"row":11,"column":41},"action":"remove","lines":["product=Product.objects.filter(id=id)"],"id":1056},{"start":{"row":11,"column":4},"end":{"row":11,"column":45},"action":"insert","lines":["get_object_or_404(Product, id=product_id)"]}],[{"start":{"row":11,"column":4},"end":{"row":11,"column":5},"action":"insert","lines":["p"],"id":1057},{"start":{"row":11,"column":5},"end":{"row":11,"column":6},"action":"insert","lines":["r"]},{"start":{"row":11,"column":6},"end":{"row":11,"column":7},"action":"insert","lines":["o"]},{"start":{"row":11,"column":7},"end":{"row":11,"column":8},"action":"insert","lines":["d"]},{"start":{"row":11,"column":8},"end":{"row":11,"column":9},"action":"insert","lines":["u"]},{"start":{"row":11,"column":9},"end":{"row":11,"column":10},"action":"insert","lines":["c"]},{"start":{"row":11,"column":10},"end":{"row":11,"column":11},"action":"insert","lines":["t"]},{"start":{"row":11,"column":11},"end":{"row":11,"column":12},"action":"insert","lines":["="]}],[{"start":{"row":11,"column":42},"end":{"row":11,"column":50},"action":"remove","lines":["product_"],"id":1058}],[{"start":{"row":20,"column":0},"end":{"row":37,"column":0},"action":"remove","lines":["'''","def create_or_edit_review(request, pk=None):","    \"\"\"","    Create a view that allows us to create","    or edit a post depending if the review ID","    is null or not","    \"\"\"","    review = get_object_or_404(customer_review, pk=pk) if pk else None","    if request.method == \"POST\":","        form = ReviewForm(request.POST, request.FILES, instance=review)","        if form.is_valid():","            review = form.save()","            return redirect(review_detail, review.pk)","    else:","        form = ReviewForm(instance=review)","    return render(request, 'review_form.html', {'form': form})","'''",""],"id":1063},{"start":{"row":19,"column":0},"end":{"row":20,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":15,"column":0},"end":{"row":18,"column":68},"action":"remove","lines":[" ","def review_detail(request, id):","    review = get_object_or_404(customer_review, pk=id)","    return render(request, 'review_detail.html', {'review': review})"],"id":1064}],[{"start":{"row":7,"column":0},"end":{"row":8,"column":57},"action":"remove","lines":["from django.template.context_processors import csrf","from django.contrib.auth.decorators import login_required"],"id":1065}]]},"timestamp":1595860762773}